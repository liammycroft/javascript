HTTP/1.1 200 OK
Cache-Control: no-cache,no-store, must-revalidate, private
Pragma: no-cache
Content-Length: 557770  
Content-Type: application/json; charset=utf-8
Expires: -1
X-Fenergo-LogId: b5bb0a45-bf18-4fbe-ad9a-23fe6828ee3e
X-XSS-Protection: 1; mode=block
X-Content-Type-Options: nosniff
Content-Security-Policy: script-src 'self' 'unsafe-inline' 'unsafe-eval' blob:; style-src 'self' 'unsafe-inline'; img-src 'self';
Date: Tue,
12 Oct 2021 12: 57: 54 GMT

{
    "data": {
        "type": "PageBuilder",
        "caption": "Relinking Request",
        "childComponents": [
            {
                "type": "ApiProvider",
                "disabled": false,
                "name": "getLegalEntityInformation",
                "verb": "GET",
                "forceRequest": true,
                "endpointMethod": "entityData",
                "endpointRoute": {
                    "$func": "template",
                    "template": "/LegalEntity/{entityId}/le360CompanyClient",
                    "values": {
                        "entityId": {
                            "$func": "value",
                            "scope": "DynamicRouter.params",
                            "field": "EntityId"
                        }
                    }
                },
                "requestImmediately": true,
                "onFailure": [
                    {
                        "behaviour": "addMessages",
                        "provider": "MessageScope",
                        "argument": {
                            "messages": {
                                "$func": "data",
                                "scope": "ApiProvider.getLegalEntityInformation",
                                "jsonPathQuery": "$.messages[*]"
                            }
                        }
                    }
                ]
            },
            {
                "type": "Drawer",
                "name": "LeftDrawer",
                "orientation": "left",
                "open": true,
                "overlay": false,
                "childComponents": [
                    {
                        "type": "Overlay",
                        "hidden": {
                            "$func": "nor",
                            "operands": [
                                {
                                    "$func": "state",
                                    "item": "requesting",
                                    "scope": "ApiProvider.postCaseAgencyRequestFileUpload"
                                },
                                {
                                    "$func": "and",
                                    "operands": [
                                        {
                                            "$func": "state",
                                            "item": "hasResponse",
                                            "scope": "ApiProvider.postCaseAgencyRequestFileUpload"
                                        },
                                        {
                                            "$func": "not",
                                            "operands": [
                                                {
                                                    "$func": "state",
                                                    "item": "hasError",
                                                    "scope": "ApiProvider.postCaseAgencyRequestFileUpload"
                                                }
                                            ]
                                        }
                                    ]
                                },
                                {
                                    "$func": "state",
                                    "item": "requesting",
                                    "scope": "ApiProvider.postCaseCRSRemediation"
                                },
                                {
                                    "$func": "and",
                                    "operands": [
                                        {
                                            "$func": "state",
                                            "item": "hasResponse",
                                            "scope": "ApiProvider.postCaseCRSRemediation"
                                        },
                                        {
                                            "$func": "not",
                                            "operands": [
                                                {
                                                    "$func": "state",
                                                    "item": "hasError",
                                                    "scope": "ApiProvider.postCaseCRSRemediation"
                                                }
                                            ]
                                        }
                                    ]
                                },
                                {
                                    "$func": "state",
                                    "item": "requesting",
                                    "scope": "ApiProvider.postCaseMarginRemediation"
                                },
                                {
                                    "$func": "and",
                                    "operands": [
                                        {
                                            "$func": "state",
                                            "item": "hasResponse",
                                            "scope": "ApiProvider.postCaseMarginRemediation"
                                        },
                                        {
                                            "$func": "not",
                                            "operands": [
                                                {
                                                    "$func": "state",
                                                    "item": "hasError",
                                                    "scope": "ApiProvider.postCaseMarginRemediation"
                                                }
                                            ]
                                        }
                                    ]
                                },
                                {
                                    "$func": "state",
                                    "item": "requesting",
                                    "scope": "ApiProvider.postCaseOffboarding"
                                },
                                {
                                    "$func": "and",
                                    "operands": [
                                        {
                                            "$func": "state",
                                            "item": "hasResponse",
                                            "scope": "ApiProvider.postCaseOffboarding"
                                        },
                                        {
                                            "$func": "not",
                                            "operands": [
                                                {
                                                    "$func": "state",
                                                    "item": "hasError",
                                                    "scope": "ApiProvider.postCaseOffboarding"
                                                }
                                            ]
                                        }
                                    ]
                                },
                                {
                                    "$func": "state",
                                    "item": "requesting",
                                    "scope": "ApiProvider.postCaseReAssessment"
                                },
                                {
                                    "$func": "and",
                                    "operands": [
                                        {
                                            "$func": "state",
                                            "item": "hasResponse",
                                            "scope": "ApiProvider.postCaseReAssessment"
                                        },
                                        {
                                            "$func": "not",
                                            "operands": [
                                                {
                                                    "$func": "state",
                                                    "item": "hasError",
                                                    "scope": "ApiProvider.postCaseReAssessment"
                                                }
                                            ]
                                        }
                                    ]
                                },
                                {
                                    "$func": "state",
                                    "item": "requesting",
                                    "scope": "ApiProvider.postCaseRegularReview"
                                },
                                {
                                    "$func": "and",
                                    "operands": [
                                        {
                                            "$func": "state",
                                            "item": "hasResponse",
                                            "scope": "ApiProvider.postCaseRegularReview"
                                        },
                                        {
                                            "$func": "not",
                                            "operands": [
                                                {
                                                    "$func": "state",
                                                    "item": "hasError",
                                                    "scope": "ApiProvider.postCaseRegularReview"
                                                }
                                            ]
                                        }
                                    ]
                                },
                                {
                                    "$func": "state",
                                    "item": "requesting",
                                    "scope": "ApiProvider.postCaseTradingEntityMaintenance"
                                },
                                {
                                    "$func": "and",
                                    "operands": [
                                        {
                                            "$func": "state",
                                            "item": "hasResponse",
                                            "scope": "ApiProvider.postCaseTradingEntityMaintenance"
                                        },
                                        {
                                            "$func": "not",
                                            "operands": [
                                                {
                                                    "$func": "state",
                                                    "item": "hasError",
                                                    "scope": "ApiProvider.postCaseTradingEntityMaintenance"
                                                }
                                            ]
                                        }
                                    ]
                                },
                                {
                                    "$func": "state",
                                    "item": "requesting",
                                    "scope": "ApiProvider.postCaseDcoExample"
                                },
                                {
                                    "$func": "and",
                                    "operands": [
                                        {
                                            "$func": "state",
                                            "item": "hasResponse",
                                            "scope": "ApiProvider.postCaseDcoExample"
                                        },
                                        {
                                            "$func": "not",
                                            "operands": [
                                                {
                                                    "$func": "state",
                                                    "item": "hasError",
                                                    "scope": "ApiProvider.postCaseDcoExample"
                                                }
                                            ]
                                        }
                                    ]
                                }
                            ]
                        }
                    },
                    {
                        "type": "EntityContextCard",
                        "name": "entityContextCard",
                        "entityName": {
                            "$func": "data",
                            "scope": "ApiProvider.getLegalEntityInformation",
                            "jsonPathValue": "$.data.LE_Name"
                        },
                        "url": {
                            "$func": "template",
                            "template": "/app/{entityId}/LegalEntity/{entityId}/le360",
                            "values": {
                                "entityId": {
                                    "$func": "value",
                                    "scope": "DynamicRouter.params",
                                    "field": "EntityId"
                                }
                            }
                        },
                        "contextType": "LE",
                        "childComponents": [
                            {
                                "type": "FormArea",
                                "name": "legalEntityContextCardFormArea",
                                "values": [
                                    {
                                        "$func": "value",
                                        "field": "data",
                                        "scope": "ApiProvider.getLegalEntityInformation"
                                    }
                                ],
                                "childComponents": [
                                    {
                                        "type": "Dropdown",
                                        "dataKey": "LegalEntity_SubtypeId360",
                                        "caption": "Legal Entity Type",
                                        "dataSourceName": "LuLeSubTpWithUndefined",
                                        "initialValue": {
                                            "$func": "data",
                                            "scope": "ApiProvider.getLegalEntityInformation",
                                            "jsonPathValue": "$.data.LE_LegalEntitySubtypeId"
                                        },
                                        "readOnly": true
                                    },
                                    {
                                        "type": "Dropdown",
                                        "caption": "Legal Entity Type Hidden",
                                        "autoSelectFirstOption": true,
                                        "simpleValue": true,
                                        "hidden": true,
                                        "options": {
                                            "$func": "lookup",
                                            "lookup": "LookupLegalEntityType"
                                        },
                                        "disabled": {
                                            "$func": "isUndefined",
                                            "field": "LegalEntity_SubtypeId360"
                                        },
                                        "include": {
                                            "$func": "lookupLink",
                                            "linkTable": "LinkLeTpStpReverse",
                                            "filterByValue": {
                                                "$func": "value",
                                                "field": "LegalEntity_SubtypeId360"
                                            }
                                        }
                                    }
                                ]
                            }
                        ]
                    },
                    {
                        "type": "Repeater",
                        "data": {
                            "$func": "data",
                            "scope": "ApiProvider.getLeRolesForLeftDrawer",
                            "jsonPathValue": "$.data.results"
                        },
                        "childComponents": [
                            {
                                "type": "LayoutGrid",
                                "name": "RoleRow",
                                "responsive": false,
                                "childComponents": [
                                    {
                                        "type": "LayoutGridColumn",
                                        "name": "roleTypeColumn",
                                        "className": "fen-grid-gpi-role-column",
                                        "columns": "7",
                                        "childComponents": [
                                            {
                                                "type": "Label",
                                                "caption": {
                                                    "$func": "template",
                                                    "template": {
                                                        "$func": "caption",
                                                        "caption": "{roleName}: "
                                                    },
                                                    "values": {
                                                        "roleName": {
                                                            "$func": "value",
                                                            "field": "LERole",
                                                            "scope": "Repeater.data"
                                                        }
                                                    }
                                                },
                                                "className": {
                                                    "$func": "template",
                                                    "template": "fen-grid-gpi-role-text {roleName}",
                                                    "values": {
                                                        "roleName": {
                                                            "$func": "value",
                                                            "field": "LERole",
                                                            "scope": "Repeater.data"
                                                        }
                                                    }
                                                }
                                            }
                                        ]
                                    },
                                    {
                                        "type": "LayoutGridColumn",
                                        "name": "roleStatusColumn",
                                        "className": "fen-grid-gpi-role-column",
                                        "columns": "3",
                                        "childComponents": [
                                            {
                                                "type": "Label",
                                                "caption": {
                                                    "$func": "template",
                                                    "template": {
                                                        "$func": "caption",
                                                        "caption": "{roleStatus}"
                                                    },
                                                    "values": {
                                                        "roleStatus": {
                                                            "$func": "value",
                                                            "field": "LeRoleStatus",
                                                            "scope": "Repeater.data"
                                                        }
                                                    }
                                                },
                                                "className": {
                                                    "$func": "template",
                                                    "template": "fen-grid-gpi-role-text {roleStatus}",
                                                    "values": {
                                                        "roleStatus": {
                                                            "$func": "value",
                                                            "field": "LeRoleStatus",
                                                            "scope": "Repeater.data"
                                                        }
                                                    }
                                                }
                                            }
                                        ]
                                    }
                                ]
                            }
                        ]
                    },
                    {
                        "type": "LayoutGrid",
                        "name": "LayoutGrid360RiskAndID",
                        "childComponents": [
                            {
                                "type": "LayoutGridColumn",
                                "name": "RiskAndIDGridColumn",
                                "columns": "12",
                                "className": "fen-gpi-itemBar",
                                "childComponents": [
                                    {
                                        "type": "DetailsContainer",
                                        "url": "details",
                                        "childComponents": [
                                            {
                                                "type": "LayoutGrid",
                                                "name": "RiskAndIDGridLayoutGridOverview",
                                                "responsive": false,
                                                "childComponents": [
                                                    {
                                                        "type": "LayoutGridColumn",
                                                        "name": "LayoutGridColumnRiskAndIDGrid1",
                                                        "className": "fen-grid-gpi-column",
                                                        "columns": "6",
                                                        "childComponents": [
                                                            {
                                                                "type": "Label",
                                                                "caption": {
                                                                    "$func": "template",
                                                                    "template": {
                                                                        "$func": "caption",
                                                                        "caption": "RISK: {riskValue}"
                                                                    },
                                                                    "values": {
                                                                        "riskValue": {
                                                                            "$func": "switch",
                                                                            "value": {
                                                                                "$func": "data",
                                                                                "scope": "ApiProvider.getLegalEntityInformation",
                                                                                "jsonPathQuery": "$.data.vwLERiskProfile_RiskStatus"
                                                                            },
                                                                            "cases": {
                                                                                "": "-"
                                                                            },
                                                                            "default": {
                                                                                "$func": "data",
                                                                                "scope": "ApiProvider.getLegalEntityInformation",
                                                                                "jsonPathQuery": "$.data.vwLERiskProfile_RiskStatus"
                                                                            }
                                                                        }
                                                                    }
                                                                },
                                                                "className": {
                                                                    "$func": "template",
                                                                    "template": "header-risk-le360 {riskValue}",
                                                                    "values": {
                                                                        "riskValue": {
                                                                            "$func": "data",
                                                                            "scope": "ApiProvider.getLegalEntityInformation",
                                                                            "jsonPathQuery": "$.data.vwLERiskProfile_RiskStatus"
                                                                        }
                                                                    }
                                                                }
                                                            }
                                                        ]
                                                    },
                                                    {
                                                        "type": "LayoutGridColumn",
                                                        "name": "LayoutGridColumnRiskAndIDGrid2",
                                                        "className": "fen-grid-gpi-column",
                                                        "columns": "6",
                                                        "childComponents": [
                                                            {
                                                                "className": "fen-grid-gpi-column",
                                                                "type": "Label",
                                                                "caption": {
                                                                    "$func": "template",
                                                                    "template": {
                                                                        "$func": "caption",
                                                                        "caption": "ID: {leId}"
                                                                    },
                                                                    "values": {
                                                                        "leId": {
                                                                            "$func": "data",
                                                                            "scope": "ApiProvider.getLegalEntityInformation",
                                                                            "jsonPathQuery": "$.data.LegalEntityId"
                                                                        }
                                                                    }
                                                                }
                                                            }
                                                        ]
                                                    }
                                                ]
                                            }
                                        ]
                                    }
                                ]
                            }
                        ]
                    },
                    {
                        "type": "ApiProvider",
                        "verb": "GET",
                        "name": "leftNavSiteMapProvider",
                        "persistMode": "global",
                        "endpointMethod": "generic",
                        "endpointRoute": {
                            "$func": "template",
                            "template": "/navigation/sitemaps/le360CompanyClient/LE360CompanyClient?EntityId={EntityId}&LegalEntityId={LegalEntityId}&Mode={Mode}",
                            "values": {
                                "EntityId": {
                                    "$func": "value",
                                    "scope": "DynamicRouter.params",
                                    "field": "EntityId"
                                },
                                "LegalEntityId": {
                                    "$func": "value",
                                    "scope": "DynamicRouter.params",
                                    "field": "EntityId"
                                },
                                "Mode": "Edit"
                            }
                        },
                        "requestImmediately": true,
                        "onFailure": [
                            {
                                "behaviour": "addMessages",
                                "provider": "MessageScope",
                                "argument": {
                                    "messages": {
                                        "$func": "data",
                                        "scope": "ApiProvider.leftNavSiteMapProvider",
                                        "jsonPathQuery": "$.messages[*]"
                                    }
                                }
                            }
                        ]
                    },
                    {
                        "type": "ApiProvider",
                        "name": "postCaseAgencyRequestFileUpload",
                        "verb": "POST",
                        "endpointMethod": "entityData",
                        "body": {
                            "businessContext": "Case",
                            "entityId": 0,
                            "parentBusinessContext": "LegalEntity",
                            "parentEntityId": {
                                "$func": "value",
                                "scope": "DynamicRouter.params",
                                "field": "EntityId"
                            },
                            "requestContext": "case_17500",
                            "data": {
                                "CaseArExtension_RequestTypeId": "11599"
                            }
                        },
                        "onSuccess": [
                            {
                                "behaviour": "addMessages",
                                "provider": "MessageScope",
                                "argument": {
                                    "messages": {
                                        "$func": "data",
                                        "scope": "ApiProvider.postCaseAgencyRequestFileUpload",
                                        "jsonPathQuery": "$.messages[*]"
                                    }
                                }
                            },
                            {
                                "behaviour": "fetchGpiAndNavigateToFirstTask",
                                "provider": "Navigator",
                                "argument": {
                                    "RoleCaseId": {
                                        "$func": "data",
                                        "scope": "ApiProvider.postCaseAgencyRequestFileUpload",
                                        "jsonPathValue": "$.data.CaseId"
                                    }
                                },
                                "onFailure": [
                                    {
                                        "behaviour": "push",
                                        "provider": "DynamicRouter",
                                        "argument": {
                                            "pathname": {
                                                "$func": "template",
                                                "template": "/app/Case/{entityId}/Case/Edit",
                                                "values": {
                                                    "entityId": {
                                                        "$func": "data",
                                                        "scope": "ApiProvider.postCaseAgencyRequestFileUpload",
                                                        "jsonPathValue": "$.data.CaseId"
                                                    }
                                                }
                                            }
                                        }
                                    }
                                ]
                            }
                        ],
                        "onFailure": [
                            {
                                "behaviour": "addMessages",
                                "provider": "MessageScope",
                                "argument": {
                                    "messages": {
                                        "$func": "data",
                                        "scope": "ApiProvider.postCaseAgencyRequestFileUpload",
                                        "jsonPathQuery": "$.messages[*]"
                                    }
                                }
                            }
                        ]
                    },
                    {
                        "type": "ApiProvider",
                        "name": "postCaseDcoExample",
                        "verb": "POST",
                        "endpointMethod": "entityData",
                        "body": {
                            "businessContext": "Case",
                            "entityId": 0,
                            "parentBusinessContext": "LegalEntity",
                            "parentEntityId": {
                                "$func": "value",
                                "scope": "DynamicRouter.params",
                                "field": "EntityId"
                            },
                            "requestContext": "case_12001"
                        },
                        "onSuccess": [
                            {
                                "behaviour": "addMessages",
                                "provider": "MessageScope",
                                "argument": {
                                    "messages": {
                                        "$func": "data",
                                        "scope": "ApiProvider.postCaseDcoExample",
                                        "jsonPathQuery": "$.messages[*]"
                                    }
                                }
                            },
                            {
                                "behaviour": "fetchGpiAndNavigateToFirstTask",
                                "provider": "Navigator",
                                "argument": {
                                    "RoleCaseId": {
                                        "$func": "data",
                                        "scope": "ApiProvider.postCaseDcoExample",
                                        "jsonPathValue": "$.data.CaseId"
                                    }
                                },
                                "onFailure": [
                                    {
                                        "behaviour": "push",
                                        "provider": "DynamicRouter",
                                        "argument": {
                                            "pathname": {
                                                "$func": "template",
                                                "template": "/app/Case/{entityId}/Case/Edit",
                                                "values": {
                                                    "entityId": {
                                                        "$func": "data",
                                                        "scope": "ApiProvider.postCaseDcoExample",
                                                        "jsonPathValue": "$.data.CaseId"
                                                    }
                                                }
                                            }
                                        }
                                    }
                                ]
                            }
                        ],
                        "onFailure": [
                            {
                                "behaviour": "addMessages",
                                "provider": "MessageScope",
                                "argument": {
                                    "messages": {
                                        "$func": "data",
                                        "scope": "ApiProvider.postCaseDcoExample",
                                        "jsonPathQuery": "$.messages[*]"
                                    }
                                }
                            }
                        ]
                    },
                    {
                        "type": "ApiProvider",
                        "name": "postCaseCRSRemediation",
                        "verb": "POST",
                        "endpointMethod": "entityData",
                        "body": {
                            "businessContext": "Case",
                            "entityId": 0,
                            "parentBusinessContext": "LegalEntity",
                            "parentEntityId": {
                                "$func": "value",
                                "scope": "DynamicRouter.params",
                                "field": "EntityId"
                            },
                            "requestContext": "case_6003"
                        },
                        "onSuccess": [
                            {
                                "behaviour": "addMessages",
                                "provider": "MessageScope",
                                "argument": {
                                    "messages": {
                                        "$func": "data",
                                        "scope": "ApiProvider.postCaseCRSRemediation",
                                        "jsonPathQuery": "$.messages[*]"
                                    }
                                }
                            },
                            {
                                "behaviour": "push",
                                "provider": "DynamicRouter",
                                "argument": {
                                    "pathname": {
                                        "$func": "template",
                                        "template": "/app/Case/{entityId}/Case/Edit",
                                        "values": {
                                            "entityId": {
                                                "$func": "data",
                                                "scope": "ApiProvider.postCaseCRSRemediation",
                                                "jsonPathValue": "$.data.CaseId"
                                            }
                                        }
                                    }
                                }
                            }
                        ],
                        "onFailure": [
                            {
                                "behaviour": "addMessages",
                                "provider": "MessageScope",
                                "argument": {
                                    "messages": {
                                        "$func": "data",
                                        "scope": "ApiProvider.postCaseCRSRemediation",
                                        "jsonPathQuery": "$.messages[*]"
                                    }
                                }
                            }
                        ]
                    },
                    {
                        "type": "ApiProvider",
                        "name": "postCaseMarginRemediation",
                        "verb": "POST",
                        "endpointMethod": "entityData",
                        "body": {
                            "businessContext": "Case",
                            "entityId": 0,
                            "parentBusinessContext": "LegalEntity",
                            "parentEntityId": {
                                "$func": "value",
                                "scope": "DynamicRouter.params",
                                "field": "EntityId"
                            },
                            "requestContext": "case_6005"
                        },
                        "onSuccess": [
                            {
                                "behaviour": "addMessages",
                                "provider": "MessageScope",
                                "argument": {
                                    "messages": {
                                        "$func": "data",
                                        "scope": "ApiProvider.postCaseMarginRemediation",
                                        "jsonPathQuery": "$.messages[*]"
                                    }
                                }
                            },
                            {
                                "behaviour": "fetchGpiAndNavigateToFirstTask",
                                "provider": "Navigator",
                                "argument": {
                                    "RoleCaseId": {
                                        "$func": "data",
                                        "scope": "ApiProvider.postCaseMarginRemediation",
                                        "jsonPathValue": "$.data.CaseId"
                                    }
                                },
                                "onFailure": [
                                    {
                                        "behaviour": "push",
                                        "provider": "DynamicRouter",
                                        "argument": {
                                            "pathname": {
                                                "$func": "template",
                                                "template": "/app/Case/{entityId}/Case/Edit",
                                                "values": {
                                                    "entityId": {
                                                        "$func": "data",
                                                        "scope": "ApiProvider.postCaseMarginRemediation",
                                                        "jsonPathValue": "$.data.CaseId"
                                                    }
                                                }
                                            }
                                        }
                                    }
                                ]
                            }
                        ],
                        "onFailure": [
                            {
                                "behaviour": "addMessages",
                                "provider": "MessageScope",
                                "argument": {
                                    "messages": {
                                        "$func": "data",
                                        "scope": "ApiProvider.postCaseMarginRemediation",
                                        "jsonPathQuery": "$.messages[*]"
                                    }
                                }
                            }
                        ]
                    },
                    {
                        "type": "ApiProvider",
                        "name": "postCaseOffboarding",
                        "verb": "POST",
                        "endpointMethod": "entityData",
                        "body": {
                            "businessContext": "Case",
                            "entityId": 0,
                            "parentBusinessContext": "LegalEntity",
                            "parentEntityId": {
                                "$func": "value",
                                "scope": "DynamicRouter.params",
                                "field": "EntityId"
                            },
                            "requestContext": "case_320",
                            "data": {
                                "$func": "merge",
                                "values": [
                                    {
                                        "$func": "data",
                                        "scope": "FormArea.TaskPageFormArea"
                                    },
                                    {
                                        "AllRoles": {
                                            "$func": "join",
                                            "separator": ",",
                                            "value": {
                                                "$func": "data",
                                                "scope": "ApiProvider.getLeRoles",
                                                "jsonPathQuery": "$..ID"
                                            }
                                        }
                                    },
                                    {
                                        "Inverse_RolesGrid": {
                                            "$func": "switch",
                                            "value": {
                                                "$func": "fieldValue",
                                                "field": "OffboardingData_Type",
                                                "scope": "FormArea.TaskPageFormArea"
                                            },
                                            "cases": {
                                                "30500": false,
                                                "30501": {
                                                    "$func": "data",
                                                    "field": "currentSelection",
                                                    "scope": "DataGrid.LeRolesGrid",
                                                    "jsonPathValue": "$.currentSelection.inverse"
                                                }
                                            }
                                        }
                                    },
                                    {
                                        "SelectedRoles": {
                                            "$func": "switch",
                                            "value": {
                                                "$func": "fieldValue",
                                                "field": "OffboardingData_Type",
                                                "scope": "FormArea.TaskPageFormArea"
                                            },
                                            "cases": {
                                                "30500": {
                                                    "$func": "join",
                                                    "separator": ",",
                                                    "value": {
                                                        "$func": "data",
                                                        "scope": "ApiProvider.getLeRoles",
                                                        "jsonPathQuery": "$..ID"
                                                    }
                                                },
                                                "30501": {
                                                    "$func": "join",
                                                    "separator": ",",
                                                    "value": {
                                                        "$func": "data",
                                                        "field": "currentSelection",
                                                        "scope": "DataGrid.LeRolesGrid",
                                                        "jsonPathValue": "$.currentSelection.items"
                                                    }
                                                }
                                            }
                                        }
                                    }
                                ]
                            }
                        },
                        "onSuccess": [
                            {
                                "behaviour": "addMessages",
                                "provider": "MessageScope",
                                "argument": {
                                    "messages": {
                                        "$func": "data",
                                        "scope": "ApiProvider.postCaseOffboarding",
                                        "jsonPathQuery": "$.messages[*]"
                                    }
                                }
                            },
                            {
                                "behaviour": "fetchGpiAndNavigateToFirstTask",
                                "provider": "Navigator",
                                "argument": {
                                    "RoleCaseId": {
                                        "$func": "data",
                                        "scope": "ApiProvider.postCaseOffboarding",
                                        "jsonPathValue": "$.data.CaseId"
                                    }
                                },
                                "onFailure": [
                                    {
                                        "behaviour": "push",
                                        "provider": "DynamicRouter",
                                        "argument": {
                                            "pathname": {
                                                "$func": "template",
                                                "template": "/app/Case/{entityId}/Case/Edit",
                                                "values": {
                                                    "entityId": {
                                                        "$func": "data",
                                                        "scope": "ApiProvider.postCaseOffboarding",
                                                        "jsonPathValue": "$.data.CaseId"
                                                    }
                                                }
                                            }
                                        }
                                    }
                                ]
                            }
                        ],
                        "onFailure": [
                            {
                                "behaviour": "addMessages",
                                "provider": "MessageScope",
                                "argument": {
                                    "messages": {
                                        "$func": "data",
                                        "scope": "ApiProvider.postCaseOffboarding",
                                        "jsonPathQuery": "$.messages[*]"
                                    }
                                }
                            }
                        ]
                    },
                    {
                        "type": "ApiProvider",
                        "name": "postCaseReAssessment",
                        "verb": "POST",
                        "endpointMethod": "entityData",
                        "body": {
                            "businessContext": "Case",
                            "entityId": 0,
                            "parentBusinessContext": "LegalEntity",
                            "parentEntityId": {
                                "$func": "value",
                                "scope": "DynamicRouter.params",
                                "field": "EntityId"
                            },
                            "requestContext": "case_5009"
                        },
                        "onSuccess": [
                            {
                                "behaviour": "addMessages",
                                "provider": "MessageScope",
                                "argument": {
                                    "messages": {
                                        "$func": "data",
                                        "scope": "ApiProvider.postCaseReAssessment",
                                        "jsonPathQuery": "$.messages[*]"
                                    }
                                }
                            },
                            {
                                "behaviour": "fetchGpiAndNavigateToFirstTask",
                                "provider": "Navigator",
                                "argument": {
                                    "RoleCaseId": {
                                        "$func": "data",
                                        "scope": "ApiProvider.postCaseReAssessment",
                                        "jsonPathValue": "$.data.CaseId"
                                    }
                                },
                                "onFailure": [
                                    {
                                        "behaviour": "push",
                                        "provider": "DynamicRouter",
                                        "argument": {
                                            "pathname": {
                                                "$func": "template",
                                                "template": "/app/Case/{entityId}/Case/Edit",
                                                "values": {
                                                    "entityId": {
                                                        "$func": "data",
                                                        "scope": "ApiProvider.postCaseReAssessment",
                                                        "jsonPathValue": "$.data.CaseId"
                                                    }
                                                }
                                            }
                                        }
                                    }
                                ]
                            }
                        ],
                        "onFailure": [
                            {
                                "behaviour": "addMessages",
                                "provider": "MessageScope",
                                "argument": {
                                    "messages": {
                                        "$func": "data",
                                        "scope": "ApiProvider.postCaseReAssessment",
                                        "jsonPathQuery": "$.messages[*]"
                                    }
                                }
                            }
                        ]
                    },
                    {
                        "type": "ApiProvider",
                        "name": "postCaseRegularReview",
                        "verb": "POST",
                        "endpointMethod": "entityData",
                        "body": {
                            "businessContext": "Case",
                            "entityId": 0,
                            "parentBusinessContext": "LegalEntity",
                            "parentEntityId": {
                                "$func": "value",
                                "scope": "DynamicRouter.params",
                                "field": "EntityId"
                            },
                            "requestContext": "case_5008"
                        },
                        "onSuccess": [
                            {
                                "behaviour": "addMessages",
                                "provider": "MessageScope",
                                "argument": {
                                    "messages": {
                                        "$func": "data",
                                        "scope": "ApiProvider.postCaseRegularReview",
                                        "jsonPathQuery": "$.messages[*]"
                                    }
                                }
                            },
                            {
                                "behaviour": "fetchGpiAndNavigateToFirstTask",
                                "provider": "Navigator",
                                "argument": {
                                    "RoleCaseId": {
                                        "$func": "data",
                                        "scope": "ApiProvider.postCaseRegularReview",
                                        "jsonPathValue": "$.data.CaseId"
                                    }
                                },
                                "onFailure": [
                                    {
                                        "behaviour": "push",
                                        "provider": "DynamicRouter",
                                        "argument": {
                                            "pathname": {
                                                "$func": "template",
                                                "template": "/app/Case/{entityId}/Case/Edit",
                                                "values": {
                                                    "entityId": {
                                                        "$func": "data",
                                                        "scope": "ApiProvider.postCaseRegularReview",
                                                        "jsonPathValue": "$.data.CaseId"
                                                    }
                                                }
                                            }
                                        }
                                    }
                                ]
                            }
                        ],
                        "onFailure": [
                            {
                                "behaviour": "addMessages",
                                "provider": "MessageScope",
                                "argument": {
                                    "messages": {
                                        "$func": "data",
                                        "scope": "ApiProvider.postCaseRegularReview",
                                        "jsonPathQuery": "$.messages[*]"
                                    }
                                }
                            }
                        ]
                    },
                    {
                        "type": "ApiProvider",
                        "name": "postCaseTradingEntityMaintenance",
                        "verb": "POST",
                        "endpointMethod": "entityData",
                        "body": {
                            "businessContext": "Case",
                            "entityId": 0,
                            "parentBusinessContext": "LegalEntity",
                            "parentEntityId": {
                                "$func": "value",
                                "scope": "DynamicRouter.params",
                                "field": "EntityId"
                            },
                            "requestContext": "case_15000"
                        },
                        "onSuccess": [
                            {
                                "behaviour": "addMessages",
                                "provider": "MessageScope",
                                "argument": {
                                    "messages": {
                                        "$func": "data",
                                        "scope": "ApiProvider.postCaseTradingEntityMaintenance",
                                        "jsonPathQuery": "$.messages[*]"
                                    }
                                }
                            },
                            {
                                "behaviour": "fetchGpiAndNavigateToFirstTask",
                                "provider": "Navigator",
                                "argument": {
                                    "RoleCaseId": {
                                        "$func": "data",
                                        "scope": "ApiProvider.postCaseTradingEntityMaintenance",
                                        "jsonPathValue": "$.data.CaseId"
                                    }
                                },
                                "onFailure": [
                                    {
                                        "behaviour": "push",
                                        "provider": "DynamicRouter",
                                        "argument": {
                                            "pathname": {
                                                "$func": "template",
                                                "template": "/app/Case/{entityId}/Case/Edit",
                                                "values": {
                                                    "entityId": {
                                                        "$func": "data",
                                                        "scope": "ApiProvider.postCaseTradingEntityMaintenance",
                                                        "jsonPathValue": "$.data.CaseId"
                                                    }
                                                }
                                            }
                                        }
                                    }
                                ]
                            }
                        ],
                        "onFailure": [
                            {
                                "behaviour": "addMessages",
                                "provider": "MessageScope",
                                "argument": {
                                    "messages": {
                                        "$func": "data",
                                        "scope": "ApiProvider.postCaseTradingEntityMaintenance",
                                        "jsonPathQuery": "$.messages[*]"
                                    }
                                }
                            }
                        ]
                    },
                    {
                        "type": "ApiProvider",
                        "verb": "POST",
                        "name": "getLeRolesForLeftDrawer",
                        "requestImmediately": true,
                        "forceRequest": true,
                        "endpointMethod": "search",
                        "dataGridName": "LeClientRolesGrid",
                        "body": {
                            "requestContext": "leClientRolesGrid",
                            "dataSourceName": "Fenergo",
                            "searchCriteria": [
                                {
                                    "Name": "LegalEntityId",
                                    "Type": "int",
                                    "Value": {
                                        "$func": "value",
                                        "scope": "DynamicRouter.params",
                                        "field": "EntityId"
                                    }
                                }
                            ],
                            "pagerRequest": {
                                "minRowNumber": 1,
                                "maxRowNumber": 10,
                                "sortDirection": "ASC",
                                "sortingColumn": "ID"
                            }
                        },
                        "onFailure": [
                            {
                                "behaviour": "addMessages",
                                "provider": "MessageScope",
                                "argument": {
                                    "messages": {
                                        "$func": "data",
                                        "scope": "ApiProvider.getLeRolesForLeftDrawer",
                                        "jsonPathQuery": "$.messages[*]"
                                    }
                                }
                            }
                        ]
                    },
                    {
                        "type": "ApiProvider",
                        "verb": "GET",
                        "name": "ifAobFundsViaUIIsEnabled",
                        "endpointMethod": "generic",
                        "requestImmediately": true,
                        "endpointRoute": {
                            "$func": "template",
                            "template": "/features/switch/CLM/AgencyOnboardFundsViaUI"
                        },
                        "onFailure": [
                            {
                                "behaviour": "addMessages",
                                "provider": "MessageScope",
                                "argument": {
                                    "messages": {
                                        "$func": "data",
                                        "scope": "ApiProvider.ifAobFundsViaUIIsEnabled",
                                        "jsonPathQuery": "$.messages[*]"
                                    }
                                }
                            }
                        ]
                    },
                    {
                        "type": "ApiProvider",
                        "disabled": false,
                        "name": "postGetDisableStatusOfActionButton",
                        "verb": "POST",
                        "endpointMethod": "entityMethod",
                        "forceRequest": true,
                        "requestImmediately": true,
                        "body": {
                            "businessContext": "LegalEntity",
                            "entityId": {
                                "$func": "value",
                                "scope": "DynamicRouter.params",
                                "field": "EntityId"
                            },
                            "requestContext": "getDisableStatusOfActionButton"
                        },
                        "onFailure": [
                            {
                                "behaviour": "addMessages",
                                "provider": "MessageScope",
                                "argument": {
                                    "messages": {
                                        "$func": "data",
                                        "scope": "ApiProvider.postGetDisableStatusOfActionButton",
                                        "jsonPathQuery": "$.messages[*]"
                                    }
                                }
                            }
                        ]
                    },
                    {
                        "type": "ApiProvider",
                        "disabled": false,
                        "name": "getActionsAuthorisation",
                        "verb": "GET",
                        "endpointMethod": "entityMethod",
                        "endpointRoute": {
                            "$func": "template",
                            "template": "/LegalEntity/{entityId}/getActionsAuthorisation",
                            "values": {
                                "entityId": {
                                    "$func": "value",
                                    "scope": "DynamicRouter.params",
                                    "field": "EntityId"
                                }
                            }
                        },
                        "requestImmediately": true,
                        "onFailure": [
                            {
                                "behaviour": "addMessages",
                                "provider": "MessageScope",
                                "argument": {
                                    "messages": {
                                        "$func": "data",
                                        "scope": "ApiProvider.getActionsAuthorisation",
                                        "jsonPathQuery": "$.messages[*]"
                                    }
                                }
                            }
                        ]
                    },
                    {
                        "type": "Content",
                        "className": "pdng-left-15 pdng-right-15",
                        "childComponents": [
                            {
                                "type": "MessageScope",
                                "name": "MessageScopeLHN",
                                "childComponents": [
                                    {
                                        "type": "ApiProvider",
                                        "verb": "POST",
                                        "name": "casesResultsForLHNMessage",
                                        "endpointMethod": "search",
                                        "requestImmediately": true,
                                        "body": {
                                            "requestContext": "openedCaseTypes",
                                            "dataSourceName": "Fenergo",
                                            "pagerRequest": {
                                                "sortDirection": "ASC",
                                                "sortingColumn": "CaseTypeName",
                                                "minRowNumber": 1,
                                                "maxRowNumber": 10000
                                            },
                                            "searchCriteria": [
                                                {
                                                    "name": "LegalEntityId",
                                                    "type": "int",
                                                    "value": {
                                                        "$func": "value",
                                                        "field": "EntityId",
                                                        "scope": "DynamicRouter.params"
                                                    },
                                                    "matchType": "Exact"
                                                },
                                                {
                                                    "name": "CaseTypeId",
                                                    "type": "int",
                                                    "value": 320,
                                                    "matchType": "NotEquals"
                                                }
                                            ]
                                        },
                                        "onFailure": [
                                            {
                                                "behaviour": "addMessages",
                                                "provider": "MessageScope",
                                                "argument": {
                                                    "messages": {
                                                        "$func": "data",
                                                        "scope": "ApiProvider.casesResultsForLHNMessage",
                                                        "jsonPathQuery": "$.messages[*]"
                                                    }
                                                }
                                            }
                                        ]
                                    },
                                    {
                                        "type": "MessageBox"
                                    },
                                    {
                                        "type": "Message",
                                        "dismissible": false,
                                        "showInMessageBox": false,
                                        "hidden": {
                                            "$func": "or",
                                            "operands": [
                                                {
                                                    "$func": "data",
                                                    "scope": "ApiProvider.casesResultsForLHNMessage",
                                                    "jsonPathValue": "$.data.results",
                                                    "equals": []
                                                },
                                                {
                                                    "$func": "state",
                                                    "item": "requesting",
                                                    "scope": "ApiProvider.casesResultsForLHNMessage"
                                                },
                                                {
                                                    "$func": "state",
                                                    "item": "hasResponse",
                                                    "scope": "ApiProvider.casesResultsForLHNMessage",
                                                    "equals": false
                                                }
                                            ]
                                        },
                                        "message": {
                                            "text": {
                                                "$func": "template",
                                                "template": {
                                                    "$func": "caption",
                                                    "caption": "Open cases: {openCases}"
                                                },
                                                "values": {
                                                    "openCases": {
                                                        "$func": "join",
                                                        "separator": ", ",
                                                        "value": {
                                                            "$func": "data",
                                                            "scope": "ApiProvider.casesResultsForLHNMessage",
                                                            "jsonPathQuery": "$.data.results[*].CaseAbbreviatedTypeName"
                                                        }
                                                    }
                                                }
                                            },
                                            "type": "info"
                                        }
                                    }
                                ]
                            }
                        ]
                    },
                    {
                        "type": "Content",
                        "className": "pdng-left-15 pdng-right-15",
                        "childComponents": [
                            {
                                "type": "MessageScope",
                                "name": "MessageScopeLHNOffboarding",
                                "childComponents": [
                                    {
                                        "type": "ApiProvider",
                                        "verb": "POST",
                                        "name": "casesResultsForLHNOffboardingMessage",
                                        "endpointMethod": "search",
                                        "requestImmediately": true,
                                        "body": {
                                            "requestContext": "openedCaseTypes",
                                            "dataSourceName": "Fenergo",
                                            "pagerRequest": {
                                                "sortDirection": "ASC",
                                                "sortingColumn": "CaseTypeName",
                                                "minRowNumber": 1,
                                                "maxRowNumber": 10000
                                            },
                                            "searchCriteria": [
                                                {
                                                    "name": "LegalEntityId",
                                                    "type": "int",
                                                    "value": {
                                                        "$func": "value",
                                                        "field": "EntityId",
                                                        "scope": "DynamicRouter.params"
                                                    },
                                                    "matchType": "Exact"
                                                },
                                                {
                                                    "name": "CaseTypeId",
                                                    "type": "int",
                                                    "value": 320,
                                                    "matchType": "Exact"
                                                }
                                            ]
                                        },
                                        "onFailure": [
                                            {
                                                "behaviour": "addMessages",
                                                "provider": "MessageScope",
                                                "argument": {
                                                    "messages": {
                                                        "$func": "data",
                                                        "scope": "ApiProvider.casesResultsForLHNOffboardingMessage",
                                                        "jsonPathQuery": "$.messages[*]"
                                                    }
                                                }
                                            }
                                        ]
                                    },
                                    {
                                        "type": "MessageBox"
                                    },
                                    {
                                        "type": "Message",
                                        "dismissible": false,
                                        "showInMessageBox": false,
                                        "hidden": {
                                            "$func": "or",
                                            "operands": [
                                                {
                                                    "$func": "data",
                                                    "scope": "ApiProvider.casesResultsForLHNOffboardingMessage",
                                                    "jsonPathValue": "$.data",
                                                    "equals": "undefined"
                                                },
                                                {
                                                    "$func": "data",
                                                    "scope": "ApiProvider.casesResultsForLHNOffboardingMessage",
                                                    "jsonPathValue": "$.data.results",
                                                    "equals": []
                                                },
                                                {
                                                    "$func": "state",
                                                    "item": "requesting",
                                                    "scope": "ApiProvider.casesResultsForLHNOffboardingMessage"
                                                },
                                                {
                                                    "$func": "state",
                                                    "item": "hasResponse",
                                                    "scope": "ApiProvider.casesResultsForLHNOffboardingMessage",
                                                    "equals": false
                                                }
                                            ]
                                        },
                                        "message": {
                                            "text": "Offboarding requested",
                                            "type": "warning"
                                        }
                                    }
                                ]
                            }
                        ]
                    },
                    {
                        "type": "ContextMenu",
                        "name": "ActionButton",
                        "caption": "Actions",
                        "icon": "ellipsis",
                        "disabled": {
                            "$func": "data",
                            "jsonPathValue": "$.data",
                            "scope": "ApiProvider.postGetDisableStatusOfActionButton"
                        },
                        "childComponents": [
                            {
                                "type": "Button",
                                "name": "buttonAgencyRequest",
                                "caption": "Agency Request",
                                "onClick": [
                                    {
                                        "$func": "data",
                                        "jsonPathValue": "$.data",
                                        "scope": "ApiProvider.ifAobFundsViaUIIsEnabled",
                                        "equals": true,
                                        "then": {
                                            "behaviour": "push",
                                            "provider": "DynamicRouter",
                                            "argument": {
                                                "pathname": {
                                                    "$func": "template",
                                                    "template": "/app/{legalEntityId}/LegalEntity/{legalEntityId}/le360/agencyRequestLaunch",
                                                    "values": {
                                                        "legalEntityId": {
                                                            "$func": "value",
                                                            "field": "EntityId",
                                                            "scope": "DynamicRouter.params"
                                                        }
                                                    }
                                                }
                                            }
                                        },
                                        "else": {
                                            "behaviour": "request",
                                            "provider": "ApiProvider",
                                            "namespace": "postCaseAgencyRequestFileUpload"
                                        }
                                    }
                                ],
                                "hidden": {
                                    "$func": "data",
                                    "scope": "ApiProvider.getActionsAuthorisation",
                                    "jsonPathValue": "$.data",
                                    "notMatchMask": "actions.agencyRequest"
                                }
                            },
                            {
                                "hidden": {
                                    "$func": "data",
                                    "scope": "ApiProvider.getActionsAuthorisation",
                                    "jsonPathValue": "$.data",
                                    "notMatchMask": "actions.crsRemediation"
                                },
                                "type": "Button",
                                "name": "buttonCRSRemediation",
                                "caption": "CRS Remediation",
                                "onClick": [
                                    {
                                        "behaviour": "request",
                                        "provider": "ApiProvider",
                                        "namespace": "postCaseCRSRemediation"
                                    },
                                    {
                                        "behaviour": "fetchGpiAndNavigateToFirstTask",
                                        "provider": "Navigator",
                                        "argument": {
                                            "RoleCaseId": {
                                                "$func": "data",
                                                "scope": "ApiProvider.postCaseCRSRemediation",
                                                "jsonPathValue": "$.data.CaseId"
                                            }
                                        },
                                        "onFailure": [
                                            {
                                                "behaviour": "push",
                                                "provider": "DynamicRouter",
                                                "argument": {
                                                    "pathname": {
                                                        "$func": "template",
                                                        "template": "/app/{entityId}/LegalEntity/{entityId}/le360",
                                                        "values": {
                                                            "entityId": {
                                                                "$func": "value",
                                                                "field": "EntityId",
                                                                "scope": "DynamicRouter.params"
                                                            }
                                                        }
                                                    }
                                                }
                                            }
                                        ]
                                    }
                                ]
                            },
                            {
                                "type": "Button",
                                "caption": "Maintenance Request",
                                "onClick": [
                                    {
                                        "behaviour": "push",
                                        "provider": "DynamicRouter",
                                        "argument": {
                                            "pathname": {
                                                "$func": "template",
                                                "template": "/app/{legalEntityId}/LegalEntity/{legalEntityId}/le360/maintenanceLaunch",
                                                "values": {
                                                    "legalEntityId": {
                                                        "$func": "value",
                                                        "field": "EntityId",
                                                        "scope": "DynamicRouter.params"
                                                    }
                                                }
                                            }
                                        }
                                    }
                                ],
                                "hidden": {
                                    "$func": "data",
                                    "scope": "ApiProvider.getActionsAuthorisation",
                                    "jsonPathValue": "$.data",
                                    "notMatchMask": "actions.maintenanceRequest"
                                }
                            },
                            {
                                "type": "Button",
                                "name": "buttonMarginRemediation",
                                "caption": "Margin Remediation",
                                "hidden": {
                                    "$func": "data",
                                    "scope": "ApiProvider.getActionsAuthorisation",
                                    "jsonPathValue": "$.data",
                                    "notMatchMask": "actions.marginRemediation"
                                },
                                "onClick": [
                                    {
                                        "behaviour": "request",
                                        "provider": "ApiProvider",
                                        "namespace": "postCaseMarginRemediation"
                                    }
                                ]
                            },
                            {
                                "type": "Button",
                                "name": "buttonOffboarding",
                                "caption": "Offboarding Request",
                                "onClick": [
                                    {
                                        "behaviour": "push",
                                        "provider": "DynamicRouter",
                                        "argument": {
                                            "pathname": {
                                                "$func": "template",
                                                "template": "/app/{legalEntityId}/LegalEntity/{legalEntityId}/le360/createOffboardingRequest",
                                                "values": {
                                                    "legalEntityId": {
                                                        "$func": "value",
                                                        "field": "EntityId",
                                                        "scope": "DynamicRouter.params"
                                                    }
                                                }
                                            }
                                        }
                                    }
                                ],
                                "hidden": {
                                    "$func": "data",
                                    "scope": "ApiProvider.getActionsAuthorisation",
                                    "jsonPathValue": "$.data",
                                    "notMatchMask": "actions.offboarding"
                                }
                            },
                            {
                                "type": "Button",
                                "name": "buttonReOnboarding",
                                "caption": "Re-Onboarding Request",
                                "hidden": {
                                    "$func": "data",
                                    "scope": "ApiProvider.getActionsAuthorisation",
                                    "jsonPathValue": "$.data",
                                    "notMatchMask": "actions.reOnboarding"
                                },
                                "onClick": [
                                    {
                                        "behaviour": "push",
                                        "provider": "DynamicRouter",
                                        "argument": {
                                            "pathname": {
                                                "$func": "template",
                                                "template": "/app/{legalEntityId}/reOnboardingRequest",
                                                "values": {
                                                    "legalEntityId": {
                                                        "$func": "value",
                                                        "field": "EntityId",
                                                        "scope": "DynamicRouter.params"
                                                    }
                                                }
                                            }
                                        }
                                    }
                                ]
                            },
                            {
                                "type": "Button",
                                "name": "buttonReassessment",
                                "caption": "Reassessment",
                                "onClick": [
                                    {
                                        "behaviour": "request",
                                        "provider": "ApiProvider",
                                        "namespace": "postCaseReAssessment"
                                    }
                                ],
                                "hidden": {
                                    "$func": "data",
                                    "scope": "ApiProvider.getActionsAuthorisation",
                                    "jsonPathValue": "$.data",
                                    "notMatchMask": "actions.reassessment"
                                }
                            },
                            {
                                "type": "Button",
                                "name": "buttonRegularReview",
                                "caption": "Regular Review",
                                "onClick": [
                                    {
                                        "behaviour": "request",
                                        "provider": "ApiProvider",
                                        "namespace": "postCaseRegularReview"
                                    }
                                ],
                                "hidden": {
                                    "$func": "data",
                                    "scope": "ApiProvider.getActionsAuthorisation",
                                    "jsonPathValue": "$.data",
                                    "notMatchMask": "actions.regularReview"
                                }
                            },
                            {
                                "type": "Button",
                                "name": "buttonTradingEntityMaintenance",
                                "caption": "Trading Entity Maintenance",
                                "onClick": [
                                    {
                                        "behaviour": "request",
                                        "provider": "ApiProvider",
                                        "namespace": "postCaseTradingEntityMaintenance"
                                    }
                                ],
                                "hidden": {
                                    "$func": "data",
                                    "scope": "ApiProvider.getActionsAuthorisation",
                                    "jsonPathValue": "$.data",
                                    "notMatchMask": "actions.tradingEntityMaintenance"
                                }
                            },
                            {
                                "type": "Button",
                                "name": "buttonDcoExample",
                                "caption": "DCO Example",
                                "onClick": [
                                    {
                                        "behaviour": "request",
                                        "provider": "ApiProvider",
                                        "namespace": "postCaseDcoExample"
                                    }
                                ],
                                "hidden": {
                                    "$func": "data",
                                    "scope": "ApiProvider.getActionsAuthorisation",
                                    "jsonPathValue": "$.data",
                                    "notMatchMask": "actions.agencyRequest"
                                }
                            }
                        ]
                    },
                    {
                        "type": "SecondaryNavigation",
                        "data": {
                            "$func": "data",
                            "scope": "ApiProvider.leftNavSiteMapProvider",
                            "jsonPathValue": "$.data"
                        }
                    }
                ]
            },
            {
                "type": "RouteContent",
                "name": "",
                "childComponents": [
                    {
                        "type": "FormArea",
                        "name": "RelinkingRequestFormArea",
                        "childComponents": [
                            {
                                "type": "TextBox",
                                "hidden": true,
                                "dataKey": "RelinkRequestStage",
                                "initialValue": "select-target"
                            },
                            {
                                "type": "TextBox",
                                "hidden": true,
                                "dataKey": "TargetLegalEntity"
                            },
                            {
                                "type": "TextBox",
                                "hidden": true,
                                "dataKey": "SelectedPortfolios"
                            }
                        ]
                    },
                    {
                        "type": "PanelPart",
                        "caption": "Select Target Entity",
                        "name": "TargetEntity",
                        "headerLevel": 1,
                        "collapsibleDisabled": true,
                        "hidden": {
                            "$func": "fieldValue",
                            "field": "RelinkRequestStage",
                            "notEquals": "select-target",
                            "scope": "FormArea.RelinkingRequestFormArea"
                        },
                        "childComponents": [
                            {
                                "type": "Breadcrumbs",
                                "excludes": [
                                    "LE 360"
                                ]
                            },
                            {
                                "type": "FormArea",
                                "name": "SelectLegalEntity",
                                "childComponents": [
                                    {
                                        "type": "ApiProvider",
                                        "verb": "POST",
                                        "name": "legalEntities",
                                        "requestImmediately": true,
                                        "endpointMethod": "search",
                                        "dataGridName": "LegalEntitiesGrid",
                                        "disabled": {
                                            "$func": "formState",
                                            "item": "invalid"
                                        },
                                        "body": {
                                            "requestContext": "CandidatesForAssociatedParty-LegalEntitySearch",
                                            "dataSourceName": "FenergoIndex",
                                            "searchFields": [
                                                "LegalEntityId",
                                                "LegalEntityName",
                                                "LegalEntityTypeName",
                                                "LegalEntityAddress",
                                                "LegalEntityStatus"
                                            ],
                                            "searchCriteria": {
                                                "$func": "union",
                                                "arrays": [
                                                    {
                                                        "$func": "isDefined",
                                                        "value": {
                                                            "$func": "value",
                                                            "field": "LegalEntityName",
                                                            "scope": "FormArea.SelectLegalEntity"
                                                        },
                                                        "then": [
                                                            {
                                                                "name": "LegalEntityName",
                                                                "type": "string",
                                                                "value": {
                                                                    "$func": "value",
                                                                    "field": "LegalEntityName",
                                                                    "scope": "FormArea.SelectLegalEntity"
                                                                },
                                                                "matchType": "Match"
                                                            }
                                                        ],
                                                        "else": []
                                                    },
                                                    [
                                                        {
                                                            "name": "LegalEntityId",
                                                            "type": "int",
                                                            "Value": {
                                                                "$func": "switch",
                                                                "value": {
                                                                    "$func": "value",
                                                                    "field": "ParentBusinessContext",
                                                                    "scope": "DynamicRouter.params"
                                                                },
                                                                "cases": {
                                                                    "LegalEntity": {
                                                                        "$func": "value",
                                                                        "scope": "DynamicRouter.params",
                                                                        "field": "ParentEntityId"
                                                                    }
                                                                },
                                                                "default": "0"
                                                            },
                                                            "matchType": "NotEquals"
                                                        }
                                                    ],
                                                    {
                                                        "$func": "isDefined",
                                                        "value": {
                                                            "$func": "value",
                                                            "field": "LegalEntityId",
                                                            "scope": "FormArea.SelectLegalEntity"
                                                        },
                                                        "then": [
                                                            {
                                                                "name": "LegalEntityId",
                                                                "type": "int",
                                                                "value": {
                                                                    "$func": "value",
                                                                    "field": "LegalEntityId",
                                                                    "scope": "FormArea.SelectLegalEntity"
                                                                },
                                                                "matchType": "Exact"
                                                            }
                                                        ],
                                                        "else": []
                                                    },
                                                    {
                                                        "$func": "isDefined",
                                                        "value": {
                                                            "$func": "value",
                                                            "field": "LegalEntityFacilityId",
                                                            "scope": "FormArea.SelectLegalEntity"
                                                        },
                                                        "then": [
                                                            {
                                                                "name": "LegalEntityFacilityId",
                                                                "type": "int",
                                                                "value": {
                                                                    "$func": "value",
                                                                    "field": "LegalEntityFacilityId",
                                                                    "scope": "FormArea.SelectLegalEntity"
                                                                },
                                                                "matchType": "Exact"
                                                            }
                                                        ],
                                                        "else": []
                                                    },
                                                    {
                                                        "$func": "isDefined",
                                                        "value": {
                                                            "$func": "value",
                                                            "field": "LegalEntitySubtypeId",
                                                            "scope": "FormArea.SelectLegalEntity"
                                                        },
                                                        "then": [
                                                            {
                                                                "$func": "isDefined",
                                                                "value": {
                                                                    "$func": "value",
                                                                    "field": "LegalEntitySubtypeId",
                                                                    "scope": "FormArea.SelectLegalEntity"
                                                                },
                                                                "then": {
                                                                    "name": "LegalEntitySubtypeId",
                                                                    "type": "multiselect",
                                                                    "value": {
                                                                        "$func": "value",
                                                                        "field": "LegalEntitySubtypeId",
                                                                        "scope": "FormArea.SelectLegalEntity"
                                                                    },
                                                                    "matchType": "In"
                                                                }
                                                            }
                                                        ],
                                                        "else": []
                                                    },
                                                    [
                                                        {
                                                            "name": "LegalEntitySubtypeId",
                                                            "type": "int",
                                                            "value": "33",
                                                            "matchType": "NotEquals"
                                                        },
                                                        {
                                                            "name": "LegalEntitySubtypeId",
                                                            "type": "int",
                                                            "value": "34",
                                                            "matchType": "NotEquals"
                                                        }
                                                    ],
                                                    {
                                                        "$func": "isDefined",
                                                        "value": {
                                                            "$func": "value",
                                                            "field": "LegalEntityReferenceId",
                                                            "scope": "FormArea.SelectLegalEntity"
                                                        },
                                                        "then": [
                                                            {
                                                                "name": "LegalEntityReferenceId",
                                                                "type": "int",
                                                                "value": {
                                                                    "$func": "value",
                                                                    "field": "LegalEntityReferenceId",
                                                                    "scope": "FormArea.SelectLegalEntity"
                                                                },
                                                                "matchType": "Exact"
                                                            }
                                                        ],
                                                        "else": []
                                                    },
                                                    {
                                                        "$func": "isDefined",
                                                        "value": {
                                                            "$func": "value",
                                                            "field": "LegalEntityAddress",
                                                            "scope": "FormArea.SelectLegalEntity"
                                                        },
                                                        "then": [
                                                            {
                                                                "name": "LegalEntityAddress",
                                                                "type": "string",
                                                                "value": {
                                                                    "$func": "value",
                                                                    "field": "LegalEntityAddress",
                                                                    "scope": "FormArea.SelectLegalEntity"
                                                                },
                                                                "matchType": "Match"
                                                            }
                                                        ],
                                                        "else": []
                                                    },
                                                    {
                                                        "$func": "isDefined",
                                                        "value": {
                                                            "$func": "value",
                                                            "field": "LegalEntityZipCode",
                                                            "scope": "FormArea.SelectLegalEntity"
                                                        },
                                                        "then": [
                                                            {
                                                                "name": "LegalEntityZipCode",
                                                                "type": "string",
                                                                "value": {
                                                                    "$func": "value",
                                                                    "field": "LegalEntityZipCode",
                                                                    "scope": "FormArea.SelectLegalEntity"
                                                                },
                                                                "matchType": "Match"
                                                            }
                                                        ],
                                                        "else": []
                                                    },
                                                    {
                                                        "$func": "isDefined",
                                                        "value": {
                                                            "$func": "value",
                                                            "field": "LegalEntityCountryId",
                                                            "scope": "FormArea.SelectLegalEntity"
                                                        },
                                                        "then": [
                                                            {
                                                                "name": "LegalEntityCountryId",
                                                                "type": "int",
                                                                "value": {
                                                                    "$func": "value",
                                                                    "field": "LegalEntityCountryId",
                                                                    "scope": "FormArea.SelectLegalEntity"
                                                                },
                                                                "matchType": "Exact"
                                                            }
                                                        ],
                                                        "else": []
                                                    },
                                                    {
                                                        "$func": "isDefined",
                                                        "value": {
                                                            "$func": "value",
                                                            "field": "LEAssociateTypeId",
                                                            "scope": "FormArea.SelectLegalEntity"
                                                        },
                                                        "then": [
                                                            {
                                                                "name": "LEAssociateTypeId",
                                                                "type": "multiselect",
                                                                "value": {
                                                                    "$func": "value",
                                                                    "field": "LEAssociateTypeId",
                                                                    "scope": "FormArea.SelectLegalEntity"
                                                                },
                                                                "matchType": "In"
                                                            }
                                                        ],
                                                        "else": []
                                                    },
                                                    {
                                                        "$func": "isDefined",
                                                        "value": {
                                                            "$func": "lookupValue",
                                                            "id": {
                                                                "$func": "value",
                                                                "field": "LegalEntityLastUpdatedBy",
                                                                "scope": "FormArea.SelectLegalEntity"
                                                            },
                                                            "lookup": "authorisation.LoweredUserName"
                                                        },
                                                        "then": [
                                                            {
                                                                "name": "LegalEntityLastUpdatedBy",
                                                                "type": "string",
                                                                "value": {
                                                                    "$func": "lookupValue",
                                                                    "id": {
                                                                        "$func": "value",
                                                                        "field": "LegalEntityLastUpdatedBy",
                                                                        "scope": "FormArea.SelectLegalEntity"
                                                                    },
                                                                    "lookup": "authorisation.LoweredUserName"
                                                                },
                                                                "matchType": "MatchPhrase"
                                                            }
                                                        ],
                                                        "else": []
                                                    },
                                                    {
                                                        "name": "Active",
                                                        "type": "bool",
                                                        "value": {
                                                            "$func": "switch",
                                                            "value": {
                                                                "$func": "value",
                                                                "field": "ShowDeleted",
                                                                "scope": "FormArea.SelectLegalEntity",
                                                                "equals": true
                                                            },
                                                            "cases": {
                                                                "false": false
                                                            }
                                                        },
                                                        "matchType": "Exact"
                                                    }
                                                ]
                                            }
                                        },
                                        "onFailure": [
                                            {
                                                "behaviour": "addMessages",
                                                "provider": "MessageScope",
                                                "argument": {
                                                    "messages": {
                                                        "$func": "data",
                                                        "scope": "ApiProvider.legalEntities",
                                                        "jsonPathQuery": "$.messages[*]"
                                                    }
                                                }
                                            }
                                        ]
                                    },
                                    {
                                        "type": "PanelPart",
                                        "caption": "Search Legal Entities",
                                        "name": "SearchLegalEntities",
                                        "headerLevel": 3,
                                        "stroke": true,
                                        "childComponents": [
                                            {
                                                "type": "TextBox",
                                                "caption": "Entity Name",
                                                "dataKey": "LegalEntityName"
                                            },
                                            {
                                                "type": "TextBox",
                                                "caption": "Legal Entity ID",
                                                "dataKey": "LegalEntityId",
                                                "maxLength": 10,
                                                "messages": [
                                                    {
                                                        "type": "error",
                                                        "displayed": {
                                                            "$func": "and",
                                                            "operands": [
                                                                {
                                                                    "$func": "value",
                                                                    "defined": true
                                                                },
                                                                {
                                                                    "$func": "value",
                                                                    "notRegex": "^[\\d]+$"
                                                                }
                                                            ]
                                                        },
                                                        "text": "Invalid character, please input number"
                                                    }
                                                ]
                                            }
                                        ]
                                    },
                                    {
                                        "type": "PanelPart",
                                        "caption": "Expand Filters",
                                        "collapsed": true,
                                        "stroke": true,
                                        "headerLevel": 3,
                                        "name": "AdditionalFilters",
                                        "childComponents": [
                                            {
                                                "type": "NumericBox",
                                                "caption": "Facility ID",
                                                "dataKey": "LegalEntityFacilityId"
                                            },
                                            {
                                                "type": "MultiSelectDropdown",
                                                "caption": "Legal Entity Type",
                                                "dataKey": "LegalEntitySubtypeId",
                                                "simpleValue": true,
                                                "options": {
                                                    "$func": "lookup",
                                                    "lookup": "LuLeSubTp"
                                                }
                                            },
                                            {
                                                "type": "NumericBox",
                                                "caption": "Reference ID",
                                                "dataKey": "LegalEntityReferenceId"
                                            },
                                            {
                                                "type": "TextBox",
                                                "caption": "Address",
                                                "dataKey": "LegalEntityAddress"
                                            },
                                            {
                                                "type": "TextBox",
                                                "caption": "ZIP",
                                                "dataKey": "LegalEntityZipCode"
                                            },
                                            {
                                                "type": "Dropdown",
                                                "caption": "Country",
                                                "dataKey": "LegalEntityCountryId",
                                                "simpleValue": true,
                                                "dataSourceName": "Country"
                                            },
                                            {
                                                "type": "MultiSelectDropdown",
                                                "caption": "Legal Entity Role",
                                                "dataKey": "LEAssociateTypeId",
                                                "simpleValue": true,
                                                "options": {
                                                    "$func": "lookup",
                                                    "lookup": "vwLookupLEAssociateTypeLERoles"
                                                }
                                            },
                                            {
                                                "type": "Dropdown",
                                                "caption": "Last Updated By",
                                                "dataKey": "LegalEntityLastUpdatedBy",
                                                "simpleValue": true,
                                                "dataSourceName": "authorisation.User"
                                            },
                                            {
                                                "type": "CheckBox",
                                                "caption": "Show Deleted",
                                                "dataKey": "ShowDeleted"
                                            }
                                        ]
                                    },
                                    {
                                        "type": "Button",
                                        "name": "SearchLegalEntitiesButton",
                                        "caption": {
                                            "$func": "switch",
                                            "value": {
                                                "$func": "state",
                                                "item": "hasResponse",
                                                "scope": "ApiProvider.legalEntities"
                                            },
                                            "cases": {
                                                "true": {
                                                    "$func": "caption",
                                                    "caption": "Refresh"
                                                },
                                                "false": {
                                                    "$func": "caption",
                                                    "caption": "Search"
                                                }
                                            }
                                        },
                                        "mode": {
                                            "$func": "switch",
                                            "value": {
                                                "$func": "state",
                                                "item": "hasResponse",
                                                "scope": "ApiProvider.legalEntities"
                                            },
                                            "cases": {
                                                "true": "Secondary",
                                                "false": "Primary"
                                            }
                                        },
                                        "validation": true,
                                        "disabled": {
                                            "$func": "formState",
                                            "item": "invalid"
                                        },
                                        "onClick": [
                                            {
                                                "provider": "ApiProvider",
                                                "namespace": "legalEntities",
                                                "behaviour": "request"
                                            }
                                        ]
                                    },
                                    {
                                        "type": "PanelPart",
                                        "name": "LegalEntitiesGridPanel",
                                        "stroke": false,
                                        "childComponents": [
                                            {
                                                "type": "DataGrid",
                                                "name": "LegalEntitiesGrid",
                                                "resultsPerPage": 10,
                                                "noResultsMessage": "No legal entities found",
                                                "dataSourceUniqueKeyName": "LegalEntityId",
                                                "initialSortingColumn": "_score",
                                                "initialSortDirection": "DESC",
                                                "allowRowSelection": {
                                                    "$func": "value",
                                                    "field": "ParentBusinessContext",
                                                    "scope": "DynamicRouter.params",
                                                    "equals": "TradingAgreement",
                                                    "then": "multi",
                                                    "else": "single"
                                                },
                                                "childComponents": [
                                                    {
                                                        "type": "DataGridTable",
                                                        "childComponents": [
                                                            {
                                                                "type": "DataGridHeader"
                                                            },
                                                            {
                                                                "type": "DataGridRow",
                                                                "childComponents": [
                                                                    {
                                                                        "type": "DataGridColumn",
                                                                        "caption": "Legal Entity ID",
                                                                        "dataKey": "LegalEntityId",
                                                                        "sortable": true,
                                                                        "childComponents": [
                                                                            {
                                                                                "type": "Literal",
                                                                                "dataKey": "LegalEntityId"
                                                                            }
                                                                        ]
                                                                    },
                                                                    {
                                                                        "type": "DataGridColumn",
                                                                        "caption": "Legal Entity Name",
                                                                        "dataKey": "LegalEntityName",
                                                                        "sortable": true,
                                                                        "childComponents": [
                                                                            {
                                                                                "type": "Literal",
                                                                                "dataKey": "LegalEntityName"
                                                                            }
                                                                        ]
                                                                    },
                                                                    {
                                                                        "type": "DataGridColumn",
                                                                        "caption": "Legal Entity Type",
                                                                        "dataKey": "LegalEntityTypeName",
                                                                        "sortable": true,
                                                                        "childComponents": [
                                                                            {
                                                                                "type": "Literal",
                                                                                "dataKey": "LegalEntityTypeName"
                                                                            }
                                                                        ]
                                                                    },
                                                                    {
                                                                        "type": "DataGridColumn",
                                                                        "caption": "Address",
                                                                        "dataKey": "LegalEntityAddress",
                                                                        "sortable": true,
                                                                        "childComponents": [
                                                                            {
                                                                                "type": "Literal",
                                                                                "dataKey": "LegalEntityAddress"
                                                                            }
                                                                        ]
                                                                    },
                                                                    {
                                                                        "type": "DataGridColumn",
                                                                        "caption": "Status",
                                                                        "dataKey": "LegalEntityStatus",
                                                                        "sortable": true,
                                                                        "childComponents": [
                                                                            {
                                                                                "type": "Literal",
                                                                                "dataKey": "LegalEntityStatus"
                                                                            }
                                                                        ]
                                                                    }
                                                                ]
                                                            }
                                                        ]
                                                    }
                                                ]
                                            }
                                        ]
                                    }
                                ]
                            },
                            {
                                "type": "Button",
                                "name": "selectLegalEntityButton",
                                "caption": "Select",
                                "mode": "Primary",
                                "disabled": {
                                    "$func": "switch",
                                    "value": {
                                        "$func": "value",
                                        "field": "currentSelection",
                                        "prop": "inverse",
                                        "scope": "DataGrid.LegalEntitiesGrid"
                                    },
                                    "cases": {
                                        "true": {
                                            "$func": "data",
                                            "jsonPathValue": "$.data.totalCount",
                                            "scope": "ApiProvider.legalEntities",
                                            "equals": {
                                                "$func": "data",
                                                "jsonPathValue": "currentSelection.items",
                                                "scope": "DataGrid.LegalEntitiesGrid",
                                                "prop": "length"
                                            }
                                        },
                                        "false": {
                                            "$func": "value",
                                            "field": "currentSelection",
                                            "prop": "items",
                                            "scope": "DataGrid.LegalEntitiesGrid",
                                            "equals": []
                                        }
                                    }
                                },
                                "onClick": [
                                    {
                                        "behaviour": "setValue",
                                        "provider": "FormArea",
                                        "namespace": "RelinkingRequestFormArea",
                                        "argument": {
                                            "fieldName": "TargetLegalEntity",
                                            "value": {
                                                "$func": "join",
                                                "separator": ",",
                                                "value": {
                                                    "$func": "value",
                                                    "field": "currentSelection",
                                                    "prop": "items",
                                                    "scope": "DataGrid.LegalEntitiesGrid"
                                                }
                                            }
                                        }
                                    },
                                    {
                                        "behaviour": "setValue",
                                        "provider": "FormArea",
                                        "namespace": "RelinkingRequestFormArea",
                                        "argument": {
                                            "fieldName": "RelinkRequestStage",
                                            "value": "select-portfolio"
                                        }
                                    }
                                ]
                            },
                            {
                                "type": "Link",
                                "caption": "Cancel",
                                "mode": "Secondary",
                                "url": "../"
                            }
                        ]
                    },
                    {
                        "type": "PanelPart",
                        "caption": "Select Portfolios",
                        "name": "Portfolio",
                        "headerLevel": 1,
                        "collapsibleDisabled": true,
                        "hidden": {
                            "$func": "fieldValue",
                            "field": "RelinkRequestStage",
                            "notEquals": "select-portfolio",
                            "scope": "FormArea.RelinkingRequestFormArea"
                        },
                        "childComponents": [
                            {
                                "type": "Breadcrumbs",
                                "excludes": [
                                    "LE 360"
                                ]
                            },
                            {
                                "type": "ApiProvider",
                                "verb": "POST",
                                "name": "getPortfolios",
                                "requestImmediately": true,
                                "forceRequest": true,
                                "endpointMethod": "search",
                                "onBeforeRequest": [
                                    {
                                        "provider": "PageBuilder",
                                        "behaviour": "waitForLookups"
                                    }
                                ],
                                "dataGridName": "PortfolioEntityCard",
                                "body": {
                                    "requestContext": "TradingEntitiesGrid",
                                    "dataSourceName": "Fenergo",
                                    "searchCriteria": [
                                        {
                                            "Name": "ParentEntityId",
                                            "Type": "int",
                                            "Value": {
                                                "$func": "value",
                                                "scope": "DynamicRouter.params",
                                                "field": "EntityId"
                                            }
                                        },
                                        {
                                            "Name": "TradingEntityTypeId",
                                            "type": "multiselect",
                                            "value": "4532,4533",
                                            "matchType": "In"
                                        }
                                    ]
                                },
                                "onFailure": [
                                    {
                                        "behaviour": "addMessages",
                                        "provider": "MessageScope",
                                        "argument": {
                                            "messages": {
                                                "$func": "data",
                                                "scope": "ApiProvider.getPortfolios",
                                                "jsonPathQuery": "$.messages[*]"
                                            }
                                        }
                                    }
                                ]
                            },
                            {
                                "type": "DataGrid",
                                "name": "PortfolioEntityCard",
                                "dataSourceUniqueKeyName": "Id",
                                "initialSortingColumn": "Id",
                                "noResultsMessage": "No porftolios added",
                                "renderMode": "cards",
                                "allowRowSelection": "multi",
                                "childComponents": [
                                    {
                                        "type": "DataGridCard",
                                        "childComponents": [
                                            {
                                                "type": "DataGridExpandableRow",
                                                "childComponents": [
                                                    {
                                                        "type": "LayoutFlexBox",
                                                        "name": "LayoutFlexBoxPortfolioProductsGrid",
                                                        "className": "fen-flexbox-container--spaced",
                                                        "flexDirection": "row",
                                                        "flexWrap": "wrap",
                                                        "justifyContent": "space-between",
                                                        "flexItemsWidth": "350px",
                                                        "childComponents": [
                                                            {
                                                                "type": "LayoutFlexBoxItem",
                                                                "name": "LayoutFlexBoxItemPortfolioProductsGrid",
                                                                "flexGrow": 1,
                                                                "childComponents": [
                                                                    {
                                                                        "type": "Content",
                                                                        "childComponents": [
                                                                            {
                                                                                "type": "PanelPart",
                                                                                "caption": {
                                                                                    "$func": "value",
                                                                                    "field": "TradingEntityTypeId",
                                                                                    "scope": "  .PortfolioEntityCard",
                                                                                    "equals": 11501,
                                                                                    "then": "Managed Products",
                                                                                    "else": "Products"
                                                                                },
                                                                                "name": "PortfolioRelatedProducts",
                                                                                "headerLevel": 3,
                                                                                "stroke": false,
                                                                                "collapsed": false,
                                                                                "renderAnchor": false,
                                                                                "collapsibleDisabled": true,
                                                                                "childComponents": [
                                                                                    {
                                                                                        "type": "ApiProvider",
                                                                                        "verb": "POST",
                                                                                        "name": "PortfolioProducts",
                                                                                        "requestImmediately": true,
                                                                                        "forceRequest": true,
                                                                                        "endpointMethod": "search",
                                                                                        "dataGridName": "PortfolioProductsGrid",
                                                                                        "body": {
                                                                                            "pagerRequest": {
                                                                                                "sortDirection": "DESC",
                                                                                                "sortingColumn": "LegalEntityId",
                                                                                                "minRowNumber": 1,
                                                                                                "maxRowNumber": 10
                                                                                            },
                                                                                            "requestContext": "getProductsAssociatedToTEToUPToIM",
                                                                                            "dataSourceName": "Fenergo",
                                                                                            "searchCriteria": [
                                                                                                {
                                                                                                    "name": "TEId",
                                                                                                    "type": "int",
                                                                                                    "Value": {
                                                                                                        "$func": "value",
                                                                                                        "field": "Id",
                                                                                                        "scope": "DataGridContent.PortfolioEntityCard"
                                                                                                    },
                                                                                                    "matchType": "Equals"
                                                                                                }
                                                                                            ]
                                                                                        },
                                                                                        "onFailure": [
                                                                                            {
                                                                                                "behaviour": "addMessages",
                                                                                                "provider": "MessageScope",
                                                                                                "argument": {
                                                                                                    "messages": {
                                                                                                        "$func": "data",
                                                                                                        "scope": "ApiProvider.PortfolioProducts",
                                                                                                        "jsonPathQuery": "$.messages[*]"
                                                                                                    }
                                                                                                }
                                                                                            }
                                                                                        ]
                                                                                    },
                                                                                    {
                                                                                        "type": "DataGrid",
                                                                                        "name": "PortfolioProductsGrid",
                                                                                        "dataSourceUniqueKeyName": "Id",
                                                                                        "noResultsMessage": "No products added",
                                                                                        "renderMode": "cards",
                                                                                        "childComponents": [
                                                                                            {
                                                                                                "type": "DataGridCard",
                                                                                                "childComponents": [
                                                                                                    {
                                                                                                        "type": "DataGridExpandableRow",
                                                                                                        "childComponents": [
                                                                                                            {
                                                                                                                "type": "LayoutFlexBox",
                                                                                                                "className": "fen-flexbox-container--spaced",
                                                                                                                "flexDirection": "row",
                                                                                                                "flexWrap": "wrap",
                                                                                                                "justifyContent": "space-between",
                                                                                                                "flexItemsWidth": "350px",
                                                                                                                "childComponents": [
                                                                                                                    {
                                                                                                                        "type": "LayoutFlexBoxItem",
                                                                                                                        "flexGrow": 1,
                                                                                                                        "childComponents": [
                                                                                                                            {
                                                                                                                                "type": "PanelPart",
                                                                                                                                "headerLevel": 3,
                                                                                                                                "stroke": false,
                                                                                                                                "collapsibleDisabled": true,
                                                                                                                                "hidden": false,
                                                                                                                                "childComponents": [
                                                                                                                                    {
                                                                                                                                        "type": "Content",
                                                                                                                                        "childComponents": [
                                                                                                                                            {
                                                                                                                                                "type": "PanelPart",
                                                                                                                                                "name": "portfolioEntityProductAccounts",
                                                                                                                                                "caption": "Accounts",
                                                                                                                                                "headerLevel": 3,
                                                                                                                                                "stroke": false,
                                                                                                                                                "collapsed": false,
                                                                                                                                                "renderAnchor": false,
                                                                                                                                                "collapsibleDisabled": true,
                                                                                                                                                "childComponents": [
                                                                                                                                                    {
                                                                                                                                                        "type": "ApiProvider",
                                                                                                                                                        "verb": "POST",
                                                                                                                                                        "name": "portfolioEntityProductAccountsPanel",
                                                                                                                                                        "requestImmediately": true,
                                                                                                                                                        "forceRequest": true,
                                                                                                                                                        "endpointMethod": "search",
                                                                                                                                                        "dataGridName": "portfolioEntityProductAccountsGrid",
                                                                                                                                                        "body": {
                                                                                                                                                            "requestContext": "productAccount",
                                                                                                                                                            "dataSourceName": "Fenergo",
                                                                                                                                                            "searchCriteria": [
                                                                                                                                                                {
                                                                                                                                                                    "Name": "AccountProductId",
                                                                                                                                                                    "Type": "int",
                                                                                                                                                                    "Value": {
                                                                                                                                                                        "$func": "value",
                                                                                                                                                                        "field": "Id",
                                                                                                                                                                        "scope": "DataGridContent.PortfolioProductsGrid"
                                                                                                                                                                    }
                                                                                                                                                                }
                                                                                                                                                            ]
                                                                                                                                                        },
                                                                                                                                                        "onFailure": [
                                                                                                                                                            {
                                                                                                                                                                "behaviour": "addMessages",
                                                                                                                                                                "provider": "MessageScope",
                                                                                                                                                                "argument": {
                                                                                                                                                                    "messages": {
                                                                                                                                                                        "$func": "data",
                                                                                                                                                                        "scope": "ApiProvider.portfolioEntityProductAccountsPanel",
                                                                                                                                                                        "jsonPathQuery": "$.messages[*]"
                                                                                                                                                                    }
                                                                                                                                                                }
                                                                                                                                                            }
                                                                                                                                                        ]
                                                                                                                                                    },
                                                                                                                                                    {
                                                                                                                                                        "type": "DataGrid",
                                                                                                                                                        "name": "portfolioEntityProductAccountsGrid",
                                                                                                                                                        "data": {},
                                                                                                                                                        "noResultsMessage": "No accounts added",
                                                                                                                                                        "dataSourceUniqueKeyName": "AccountId",
                                                                                                                                                        "initialSortingColumn": "AccountLastUpdatedDate",
                                                                                                                                                        "allowRowSelection": "none",
                                                                                                                                                        "childComponents": [
                                                                                                                                                            {
                                                                                                                                                                "type": "DataGridTable",
                                                                                                                                                                "childComponents": [
                                                                                                                                                                    {
                                                                                                                                                                        "type": "DataGridHeader"
                                                                                                                                                                    },
                                                                                                                                                                    {
                                                                                                                                                                        "type": "DataGridRow",
                                                                                                                                                                        "childComponents": [
                                                                                                                                                                            {
                                                                                                                                                                                "type": "DataGridColumn",
                                                                                                                                                                                "caption": "ID",
                                                                                                                                                                                "dataKey": "AccountId",
                                                                                                                                                                                "styles": {
                                                                                                                                                                                    "flexBasis": "30px"
                                                                                                                                                                                },
                                                                                                                                                                                "childComponents": [
                                                                                                                                                                                    {
                                                                                                                                                                                        "type": "Link",
                                                                                                                                                                                        "dataKey": "AccountId",
                                                                                                                                                                                        "disabled": {
                                                                                                                                                                                            "$func": "and",
                                                                                                                                                                                            "operands": [
                                                                                                                                                                                                {
                                                                                                                                                                                                    "$func": "value",
                                                                                                                                                                                                    "field": "AuthorisationCode",
                                                                                                                                                                                                    "notMatchMask": "generic.edit"
                                                                                                                                                                                                },
                                                                                                                                                                                                {
                                                                                                                                                                                                    "$func": "value",
                                                                                                                                                                                                    "field": "AuthorisationCode",
                                                                                                                                                                                                    "notMatchMask": "generic.view"
                                                                                                                                                                                                }
                                                                                                                                                                                            ]
                                                                                                                                                                                        },
                                                                                                                                                                                        "url": {
                                                                                                                                                                                            "$func": "template",
                                                                                                                                                                                            "template": "{parentBusinessContext}/{parentEntityId}/{parentBusinessContext}/{portfolioId}/portfolioEntity/{mode}/{parentBusinessContext}/{portfolioId}/Product/{productId}/product/{mode}/Product/{productId}/Account/{accountid}/{accounttype}/{mode}",
                                                                                                                                                                                            "values": {
                                                                                                                                                                                                "productId": {
                                                                                                                                                                                                    "$func": "value",
                                                                                                                                                                                                    "field": "Id",
                                                                                                                                                                                                    "scope": "DataGridContent.PortfolioProductsGrid"
                                                                                                                                                                                                },
                                                                                                                                                                                                "parentBusinessContext": {
                                                                                                                                                                                                    "$func": "value",
                                                                                                                                                                                                    "scope": "DynamicRouter.params",
                                                                                                                                                                                                    "field": "ParentBusinessContext"
                                                                                                                                                                                                },
                                                                                                                                                                                                "parentEntityId": {
                                                                                                                                                                                                    "$func": "isDefined",
                                                                                                                                                                                                    "value": {
                                                                                                                                                                                                        "$func": "value",
                                                                                                                                                                                                        "scope": "DynamicRouter.params",
                                                                                                                                                                                                        "field": "EntityId"
                                                                                                                                                                                                    },
                                                                                                                                                                                                    "then": {
                                                                                                                                                                                                        "$func": "value",
                                                                                                                                                                                                        "scope": "DynamicRouter.params",
                                                                                                                                                                                                        "field": "EntityId"
                                                                                                                                                                                                    },
                                                                                                                                                                                                    "else": {
                                                                                                                                                                                                        "$func": "value",
                                                                                                                                                                                                        "field": "ParentEntityId",
                                                                                                                                                                                                        "scope": "DynamicRouter.params"
                                                                                                                                                                                                    }
                                                                                                                                                                                                },
                                                                                                                                                                                                "accountid": {
                                                                                                                                                                                                    "$func": "fieldValue",
                                                                                                                                                                                                    "field": "AccountId"
                                                                                                                                                                                                },
                                                                                                                                                                                                "portfolioId": {
                                                                                                                                                                                                    "$func": "value",
                                                                                                                                                                                                    "field": "Id",
                                                                                                                                                                                                    "scope": "DataGridContent.PortfolioEntityCard"
                                                                                                                                                                                                },
                                                                                                                                                                                                "accounttype": {
                                                                                                                                                                                                    "$func": "switch",
                                                                                                                                                                                                    "value": {
                                                                                                                                                                                                        "$func": "fieldValue",
                                                                                                                                                                                                        "field": "AccountType"
                                                                                                                                                                                                    },
                                                                                                                                                                                                    "cases": {
                                                                                                                                                                                                        "5000": "wss",
                                                                                                                                                                                                        "5001": "calypso"
                                                                                                                                                                                                    }
                                                                                                                                                                                                },
                                                                                                                                                                                                "mode": {
                                                                                                                                                                                                    "$func": "switch",
                                                                                                                                                                                                    "value": {
                                                                                                                                                                                                        "$func": "or",
                                                                                                                                                                                                        "operands": [
                                                                                                                                                                                                            {
                                                                                                                                                                                                                "$func": "value",
                                                                                                                                                                                                                "scope": "DynamicRouter.params",
                                                                                                                                                                                                                "field": "Mode",
                                                                                                                                                                                                                "notEquals": "Edit"
                                                                                                                                                                                                            },
                                                                                                                                                                                                            {
                                                                                                                                                                                                                "$func": "value",
                                                                                                                                                                                                                "scope": "DynamicRouter.params",
                                                                                                                                                                                                                "field": "Mode",
                                                                                                                                                                                                                "equals": "EditStatus"
                                                                                                                                                                                                            },
                                                                                                                                                                                                            {
                                                                                                                                                                                                                "$func": "fieldValue",
                                                                                                                                                                                                                "field": "Task_StatusId",
                                                                                                                                                                                                                "equals": "2"
                                                                                                                                                                                                            },
                                                                                                                                                                                                            {
                                                                                                                                                                                                                "$func": "value",
                                                                                                                                                                                                                "field": "AuthorisationCode",
                                                                                                                                                                                                                "notMatchMask": "generic.edit"
                                                                                                                                                                                                            },
                                                                                                                                                                                                            {
                                                                                                                                                                                                                "$func": "value",
                                                                                                                                                                                                                "scope": "DataGridContent.PortfolioProductsGrid",
                                                                                                                                                                                                                "field": "Product_CreatedDate",
                                                                                                                                                                                                                "dateLessThan": {
                                                                                                                                                                                                                    "$func": "value",
                                                                                                                                                                                                                    "scope": "DataGridContent.PortfolioEntityCard",
                                                                                                                                                                                                                    "field": "CaseCreatedDate"
                                                                                                                                                                                                                }
                                                                                                                                                                                                            }
                                                                                                                                                                                                        ]
                                                                                                                                                                                                    },
                                                                                                                                                                                                    "cases": {
                                                                                                                                                                                                        "true": "View",
                                                                                                                                                                                                        "false": "Edit"
                                                                                                                                                                                                    }
                                                                                                                                                                                                }
                                                                                                                                                                                            }
                                                                                                                                                                                        }
                                                                                                                                                                                    }
                                                                                                                                                                                ]
                                                                                                                                                                            },
                                                                                                                                                                            {
                                                                                                                                                                                "type": "DataGridColumn",
                                                                                                                                                                                "caption": "Type",
                                                                                                                                                                                "dataKey": "AccountTypeName",
                                                                                                                                                                                "childComponents": [
                                                                                                                                                                                    {
                                                                                                                                                                                        "type": "Literal",
                                                                                                                                                                                        "dataKey": "AccountTypeName"
                                                                                                                                                                                    }
                                                                                                                                                                                ]
                                                                                                                                                                            },
                                                                                                                                                                            {
                                                                                                                                                                                "type": "DataGridColumn",
                                                                                                                                                                                "caption": "Owner",
                                                                                                                                                                                "dataKey": "AccountOwner",
                                                                                                                                                                                "childComponents": [
                                                                                                                                                                                    {
                                                                                                                                                                                        "type": "Literal",
                                                                                                                                                                                        "dataKey": "AccountOwner"
                                                                                                                                                                                    }
                                                                                                                                                                                ]
                                                                                                                                                                            },
                                                                                                                                                                            {
                                                                                                                                                                                "type": "DataGridColumn",
                                                                                                                                                                                "caption": "IM",
                                                                                                                                                                                "dataKey": "AccountIM",
                                                                                                                                                                                "childComponents": [
                                                                                                                                                                                    {
                                                                                                                                                                                        "type": "Literal",
                                                                                                                                                                                        "dataKey": "AccountIM"
                                                                                                                                                                                    }
                                                                                                                                                                                ]
                                                                                                                                                                            },
                                                                                                                                                                            {
                                                                                                                                                                                "type": "DataGridColumn",
                                                                                                                                                                                "caption": "A/C status",
                                                                                                                                                                                "dataKey": "AccountStatus",
                                                                                                                                                                                "childComponents": [
                                                                                                                                                                                    {
                                                                                                                                                                                        "type": "Literal",
                                                                                                                                                                                        "dataKey": "AccountStatus"
                                                                                                                                                                                    }
                                                                                                                                                                                ]
                                                                                                                                                                            },
                                                                                                                                                                            {
                                                                                                                                                                                "type": "DataGridColumn",
                                                                                                                                                                                "caption": "Name",
                                                                                                                                                                                "dataKey": "AccountName",
                                                                                                                                                                                "childComponents": [
                                                                                                                                                                                    {
                                                                                                                                                                                        "type": "Literal",
                                                                                                                                                                                        "dataKey": "AccountName"
                                                                                                                                                                                    }
                                                                                                                                                                                ]
                                                                                                                                                                            },
                                                                                                                                                                            {
                                                                                                                                                                                "type": "DataGridColumn",
                                                                                                                                                                                "caption": "Reference",
                                                                                                                                                                                "dataKey": "AccountReference",
                                                                                                                                                                                "childComponents": [
                                                                                                                                                                                    {
                                                                                                                                                                                        "type": "Literal",
                                                                                                                                                                                        "dataKey": "AccountReference"
                                                                                                                                                                                    }
                                                                                                                                                                                ]
                                                                                                                                                                            },
                                                                                                                                                                            {
                                                                                                                                                                                "type": "DataGridColumn",
                                                                                                                                                                                "caption": "Date created",
                                                                                                                                                                                "dataKey": "AccountCreatedDate",
                                                                                                                                                                                "childComponents": [
                                                                                                                                                                                    {
                                                                                                                                                                                        "type": "DateLiteral",
                                                                                                                                                                                        "dataKey": "AccountCreatedDate"
                                                                                                                                                                                    }
                                                                                                                                                                                ]
                                                                                                                                                                            },
                                                                                                                                                                            {
                                                                                                                                                                                "type": "DataGridColumn",
                                                                                                                                                                                "caption": "Last Updated Date",
                                                                                                                                                                                "dataKey": "AccountLastUpdatedDate",
                                                                                                                                                                                "childComponents": [
                                                                                                                                                                                    {
                                                                                                                                                                                        "type": "DateLiteral",
                                                                                                                                                                                        "dataKey": "AccountLastUpdatedDate"
                                                                                                                                                                                    }
                                                                                                                                                                                ]
                                                                                                                                                                            },
                                                                                                                                                                            {
                                                                                                                                                                                "type": "DataGridColumn",
                                                                                                                                                                                "caption": "Type Id",
                                                                                                                                                                                "dataKey": "AccountType",
                                                                                                                                                                                "hidden": true,
                                                                                                                                                                                "childComponents": [
                                                                                                                                                                                    {
                                                                                                                                                                                        "type": "Literal",
                                                                                                                                                                                        "dataKey": "AccountType"
                                                                                                                                                                                    }
                                                                                                                                                                                ]
                                                                                                                                                                            },
                                                                                                                                                                            {
                                                                                                                                                                                "type": "DataGridColumn",
                                                                                                                                                                                "caption": "Active",
                                                                                                                                                                                "dataKey": "AccountActive",
                                                                                                                                                                                "hidden": true,
                                                                                                                                                                                "childComponents": [
                                                                                                                                                                                    {
                                                                                                                                                                                        "type": "Literal",
                                                                                                                                                                                        "dataKey": "AccountActive"
                                                                                                                                                                                    }
                                                                                                                                                                                ]
                                                                                                                                                                            },
                                                                                                                                                                            {
                                                                                                                                                                                "type": "DataGridColumn",
                                                                                                                                                                                "caption": "Rowversion",
                                                                                                                                                                                "dataKey": "AccountRowVersion",
                                                                                                                                                                                "hidden": true,
                                                                                                                                                                                "childComponents": [
                                                                                                                                                                                    {
                                                                                                                                                                                        "type": "Literal",
                                                                                                                                                                                        "dataKey": "AccountRowVersion"
                                                                                                                                                                                    }
                                                                                                                                                                                ]
                                                                                                                                                                            },
                                                                                                                                                                            {
                                                                                                                                                                                "type": "DataGridColumn",
                                                                                                                                                                                "caption": "Actions",
                                                                                                                                                                                "className": "fixed-width",
                                                                                                                                                                                "childComponents": [
                                                                                                                                                                                    {
                                                                                                                                                                                        "type": "ApiProvider",
                                                                                                                                                                                        "verb": "DELETE",
                                                                                                                                                                                        "endpointMethod": "entityData",
                                                                                                                                                                                        "name": "removeProductAccountPortfolio",
                                                                                                                                                                                        "body": {
                                                                                                                                                                                            "businessContext": "Account",
                                                                                                                                                                                            "entityId": {
                                                                                                                                                                                                "$func": "fieldValue",
                                                                                                                                                                                                "field": "AccountId"
                                                                                                                                                                                            },
                                                                                                                                                                                            "parentBusinessContext": {
                                                                                                                                                                                                "$func": "value",
                                                                                                                                                                                                "scope": "DynamicRouter.params",
                                                                                                                                                                                                "field": "BusinessContext"
                                                                                                                                                                                            },
                                                                                                                                                                                            "parentEntityId": {
                                                                                                                                                                                                "$func": "value",
                                                                                                                                                                                                "scope": "DynamicRouter.params",
                                                                                                                                                                                                "field": "EntityId"
                                                                                                                                                                                            },
                                                                                                                                                                                            "requestContext": {
                                                                                                                                                                                                "$func": "switch",
                                                                                                                                                                                                "value": {
                                                                                                                                                                                                    "$func": "fieldValue",
                                                                                                                                                                                                    "field": "AccountType"
                                                                                                                                                                                                },
                                                                                                                                                                                                "cases": {
                                                                                                                                                                                                    "5000": "removeWssAccount",
                                                                                                                                                                                                    "5001": "removeCalypsoAccount"
                                                                                                                                                                                                }
                                                                                                                                                                                            },
                                                                                                                                                                                            "contextParameters": {
                                                                                                                                                                                                "taskId": {
                                                                                                                                                                                                    "$func": "value",
                                                                                                                                                                                                    "scope": "DynamicRouter.params",
                                                                                                                                                                                                    "field": "TaskId"
                                                                                                                                                                                                },
                                                                                                                                                                                                "legalEntityId": {
                                                                                                                                                                                                    "$func": "value",
                                                                                                                                                                                                    "scope": "DynamicRouter.params",
                                                                                                                                                                                                    "field": "LegalEntityId"
                                                                                                                                                                                                },
                                                                                                                                                                                                "caseId": {
                                                                                                                                                                                                    "$func": "value",
                                                                                                                                                                                                    "scope": "DynamicRouter.params",
                                                                                                                                                                                                    "field": "CaseId"
                                                                                                                                                                                                }
                                                                                                                                                                                            },
                                                                                                                                                                                            "data": {
                                                                                                                                                                                                "AccountRowVersion": {
                                                                                                                                                                                                    "$func": "fieldValue",
                                                                                                                                                                                                    "field": "AccountRowVersion"
                                                                                                                                                                                                }
                                                                                                                                                                                            }
                                                                                                                                                                                        },
                                                                                                                                                                                        "onFailure": [
                                                                                                                                                                                            {
                                                                                                                                                                                                "behaviour": "addMessages",
                                                                                                                                                                                                "provider": "MessageScope",
                                                                                                                                                                                                "argument": {
                                                                                                                                                                                                    "messages": {
                                                                                                                                                                                                        "$func": "data",
                                                                                                                                                                                                        "scope": "ApiProvider.removeProductAccountPortfolio",
                                                                                                                                                                                                        "jsonPathQuery": "$.messages[*]"
                                                                                                                                                                                                    }
                                                                                                                                                                                                }
                                                                                                                                                                                            }
                                                                                                                                                                                        ]
                                                                                                                                                                                    },
                                                                                                                                                                                    {
                                                                                                                                                                                        "type": "ApiProvider",
                                                                                                                                                                                        "verb": "POST",
                                                                                                                                                                                        "endpointMethod": "entityMethod",
                                                                                                                                                                                        "name": "unlinkProductAccountPortfolio",
                                                                                                                                                                                        "body": {
                                                                                                                                                                                            "businessContext": "Account",
                                                                                                                                                                                            "entityId": {
                                                                                                                                                                                                "$func": "fieldValue",
                                                                                                                                                                                                "field": "AccountId"
                                                                                                                                                                                            },
                                                                                                                                                                                            "parentBusinessContext": {
                                                                                                                                                                                                "$func": "value",
                                                                                                                                                                                                "scope": "DynamicRouter.params",
                                                                                                                                                                                                "field": "BusinessContext"
                                                                                                                                                                                            },
                                                                                                                                                                                            "parentEntityId": {
                                                                                                                                                                                                "$func": "value",
                                                                                                                                                                                                "scope": "DynamicRouter.params",
                                                                                                                                                                                                "field": "EntityId"
                                                                                                                                                                                            },
                                                                                                                                                                                            "requestContext": "unlinkAccount"
                                                                                                                                                                                        },
                                                                                                                                                                                        "onFailure": [
                                                                                                                                                                                            {
                                                                                                                                                                                                "behaviour": "addMessages",
                                                                                                                                                                                                "provider": "MessageScope",
                                                                                                                                                                                                "argument": {
                                                                                                                                                                                                    "messages": {
                                                                                                                                                                                                        "$func": "data",
                                                                                                                                                                                                        "scope": "ApiProvider.unlinkProductAccountPortfolio",
                                                                                                                                                                                                        "jsonPathQuery": "$.messages[*]"
                                                                                                                                                                                                    }
                                                                                                                                                                                                }
                                                                                                                                                                                            }
                                                                                                                                                                                        ]
                                                                                                                                                                                    },
                                                                                                                                                                                    {
                                                                                                                                                                                        "type": "ContextMenu",
                                                                                                                                                                                        "name": "ProductAccountActionsPortfolio",
                                                                                                                                                                                        "icon": "ellipsis",
                                                                                                                                                                                        "childComponents": [
                                                                                                                                                                                            {
                                                                                                                                                                                                "type": "Link",
                                                                                                                                                                                                "caption": "Edit",
                                                                                                                                                                                                "hidden": {
                                                                                                                                                                                                    "$func": "or",
                                                                                                                                                                                                    "operands": [
                                                                                                                                                                                                        {
                                                                                                                                                                                                            "$func": "value",
                                                                                                                                                                                                            "scope": "DynamicRouter.params",
                                                                                                                                                                                                            "field": "Mode",
                                                                                                                                                                                                            "notEquals": "Edit"
                                                                                                                                                                                                        },
                                                                                                                                                                                                        {
                                                                                                                                                                                                            "$func": "value",
                                                                                                                                                                                                            "scope": "DynamicRouter.params",
                                                                                                                                                                                                            "field": "Mode",
                                                                                                                                                                                                            "equals": "EditStatus"
                                                                                                                                                                                                        },
                                                                                                                                                                                                        {
                                                                                                                                                                                                            "$func": "fieldValue",
                                                                                                                                                                                                            "field": "Task_StatusId",
                                                                                                                                                                                                            "equals": "2"
                                                                                                                                                                                                        },
                                                                                                                                                                                                        {
                                                                                                                                                                                                            "$func": "value",
                                                                                                                                                                                                            "field": "AuthorisationCode",
                                                                                                                                                                                                            "notMatchMask": "generic.edit"
                                                                                                                                                                                                        },
                                                                                                                                                                                                        {
                                                                                                                                                                                                            "$func": "value",
                                                                                                                                                                                                            "scope": "DataGridContent.PortfolioProductsGrid",
                                                                                                                                                                                                            "field": "Product_CreatedDate",
                                                                                                                                                                                                            "dateLessThan": {
                                                                                                                                                                                                                "$func": "value",
                                                                                                                                                                                                                "scope": "DataGridContent.PortfolioEntityCard",
                                                                                                                                                                                                                "field": "CaseCreatedDate"
                                                                                                                                                                                                            }
                                                                                                                                                                                                        }
                                                                                                                                                                                                    ]
                                                                                                                                                                                                },
                                                                                                                                                                                                "to": {
                                                                                                                                                                                                    "pathname": {
                                                                                                                                                                                                        "$func": "template",
                                                                                                                                                                                                        "template": "{parentBusinessContext}/{parentEntityId}/{parentBusinessContext}/{portfolioId}/portfolioEntity/Edit/{parentBusinessContext}/{portfolioId}/Product/{productId}/product/Edit/Product/{productId}/Account/{accountid}/{accounttype}/Edit",
                                                                                                                                                                                                        "values": {
                                                                                                                                                                                                            "productId": {
                                                                                                                                                                                                                "$func": "value",
                                                                                                                                                                                                                "field": "Id",
                                                                                                                                                                                                                "scope": "DataGridContent.PortfolioProductsGrid"
                                                                                                                                                                                                            },
                                                                                                                                                                                                            "parentBusinessContext": {
                                                                                                                                                                                                                "$func": "value",
                                                                                                                                                                                                                "scope": "DynamicRouter.params",
                                                                                                                                                                                                                "field": "ParentBusinessContext"
                                                                                                                                                                                                            },
                                                                                                                                                                                                            "parentEntityId": {
                                                                                                                                                                                                                "$func": "isDefined",
                                                                                                                                                                                                                "value": {
                                                                                                                                                                                                                    "$func": "value",
                                                                                                                                                                                                                    "scope": "DynamicRouter.params",
                                                                                                                                                                                                                    "field": "EntityId"
                                                                                                                                                                                                                },
                                                                                                                                                                                                                "then": {
                                                                                                                                                                                                                    "$func": "value",
                                                                                                                                                                                                                    "scope": "DynamicRouter.params",
                                                                                                                                                                                                                    "field": "EntityId"
                                                                                                                                                                                                                },
                                                                                                                                                                                                                "else": {
                                                                                                                                                                                                                    "$func": "value",
                                                                                                                                                                                                                    "field": "ParentEntityId",
                                                                                                                                                                                                                    "scope": "DynamicRouter.params"
                                                                                                                                                                                                                }
                                                                                                                                                                                                            },
                                                                                                                                                                                                            "accountid": {
                                                                                                                                                                                                                "$func": "fieldValue",
                                                                                                                                                                                                                "field": "AccountId"
                                                                                                                                                                                                            },
                                                                                                                                                                                                            "portfolioId": {
                                                                                                                                                                                                                "$func": "value",
                                                                                                                                                                                                                "field": "Id",
                                                                                                                                                                                                                "scope": "DataGridContent.PortfolioEntityCard"
                                                                                                                                                                                                            },
                                                                                                                                                                                                            "accounttype": {
                                                                                                                                                                                                                "$func": "switch",
                                                                                                                                                                                                                "value": {
                                                                                                                                                                                                                    "$func": "fieldValue",
                                                                                                                                                                                                                    "field": "AccountType"
                                                                                                                                                                                                                },
                                                                                                                                                                                                                "cases": {
                                                                                                                                                                                                                    "5000": "wss",
                                                                                                                                                                                                                    "5001": "calypso"
                                                                                                                                                                                                                }
                                                                                                                                                                                                            }
                                                                                                                                                                                                        }
                                                                                                                                                                                                    }
                                                                                                                                                                                                }
                                                                                                                                                                                            },
                                                                                                                                                                                            {
                                                                                                                                                                                                "type": "Link",
                                                                                                                                                                                                "caption": "View",
                                                                                                                                                                                                "hidden": {
                                                                                                                                                                                                    "$func": "and",
                                                                                                                                                                                                    "operands": [
                                                                                                                                                                                                        {
                                                                                                                                                                                                            "$func": "fieldValue",
                                                                                                                                                                                                            "field": "Task_StatusId",
                                                                                                                                                                                                            "notEquals": "2"
                                                                                                                                                                                                        },
                                                                                                                                                                                                        {
                                                                                                                                                                                                            "$func": "value",
                                                                                                                                                                                                            "field": "AuthorisationCode",
                                                                                                                                                                                                            "notMatchMask": "generic.view"
                                                                                                                                                                                                        }
                                                                                                                                                                                                    ]
                                                                                                                                                                                                },
                                                                                                                                                                                                "to": {
                                                                                                                                                                                                    "pathname": {
                                                                                                                                                                                                        "$func": "template",
                                                                                                                                                                                                        "template": "{parentBusinessContext}/{parentEntityId}/{parentBusinessContext}/{portfolioId}/portfolioEntity/View/{parentBusinessContext}/{portfolioId}/Product/{productId}/product/View/Product/{productId}/Account/{accountid}/{accounttype}/View",
                                                                                                                                                                                                        "values": {
                                                                                                                                                                                                            "productId": {
                                                                                                                                                                                                                "$func": "value",
                                                                                                                                                                                                                "field": "Id",
                                                                                                                                                                                                                "scope": "DataGridContent.PortfolioProductsGrid"
                                                                                                                                                                                                            },
                                                                                                                                                                                                            "parentBusinessContext": {
                                                                                                                                                                                                                "$func": "value",
                                                                                                                                                                                                                "scope": "DynamicRouter.params",
                                                                                                                                                                                                                "field": "ParentBusinessContext"
                                                                                                                                                                                                            },
                                                                                                                                                                                                            "parentEntityId": {
                                                                                                                                                                                                                "$func": "isDefined",
                                                                                                                                                                                                                "value": {
                                                                                                                                                                                                                    "$func": "value",
                                                                                                                                                                                                                    "scope": "DynamicRouter.params",
                                                                                                                                                                                                                    "field": "EntityId"
                                                                                                                                                                                                                },
                                                                                                                                                                                                                "then": {
                                                                                                                                                                                                                    "$func": "value",
                                                                                                                                                                                                                    "scope": "DynamicRouter.params",
                                                                                                                                                                                                                    "field": "EntityId"
                                                                                                                                                                                                                },
                                                                                                                                                                                                                "else": {
                                                                                                                                                                                                                    "$func": "value",
                                                                                                                                                                                                                    "field": "ParentEntityId",
                                                                                                                                                                                                                    "scope": "DynamicRouter.params"
                                                                                                                                                                                                                }
                                                                                                                                                                                                            },
                                                                                                                                                                                                            "accountid": {
                                                                                                                                                                                                                "$func": "fieldValue",
                                                                                                                                                                                                                "field": "AccountId"
                                                                                                                                                                                                            },
                                                                                                                                                                                                            "portfolioId": {
                                                                                                                                                                                                                "$func": "value",
                                                                                                                                                                                                                "field": "Id",
                                                                                                                                                                                                                "scope": "DataGridContent.PortfolioEntityCard"
                                                                                                                                                                                                            },
                                                                                                                                                                                                            "accounttype": {
                                                                                                                                                                                                                "$func": "switch",
                                                                                                                                                                                                                "value": {
                                                                                                                                                                                                                    "$func": "fieldValue",
                                                                                                                                                                                                                    "field": "AccountType"
                                                                                                                                                                                                                },
                                                                                                                                                                                                                "cases": {
                                                                                                                                                                                                                    "5000": "wss",
                                                                                                                                                                                                                    "5001": "calypso"
                                                                                                                                                                                                                }
                                                                                                                                                                                                            }
                                                                                                                                                                                                        }
                                                                                                                                                                                                    }
                                                                                                                                                                                                }
                                                                                                                                                                                            }
                                                                                                                                                                                        ]
                                                                                                                                                                                    }
                                                                                                                                                                                ]
                                                                                                                                                                            }
                                                                                                                                                                        ]
                                                                                                                                                                    }
                                                                                                                                                                ]
                                                                                                                                                            }
                                                                                                                                                        ]
                                                                                                                                                    }
                                                                                                                                                ]
                                                                                                                                            }
                                                                                                                                        ]
                                                                                                                                    }
                                                                                                                                ]
                                                                                                                            }
                                                                                                                        ]
                                                                                                                    }
                                                                                                                ]
                                                                                                            }
                                                                                                        ]
                                                                                                    }
                                                                                                ]
                                                                                            },
                                                                                            {
                                                                                                "type": "DataGridTable",
                                                                                                "childComponents": [
                                                                                                    {
                                                                                                        "type": "DataGridHeader"
                                                                                                    },
                                                                                                    {
                                                                                                        "type": "DataGridRow",
                                                                                                        "childComponents": [
                                                                                                            {
                                                                                                                "type": "DataGridColumn",
                                                                                                                "caption": "ID",
                                                                                                                "dataKey": "Id",
                                                                                                                "styles": {
                                                                                                                    "flexBasis": "50px",
                                                                                                                    "flexGrow": 0.5,
                                                                                                                    "flexShrink": 0.5
                                                                                                                },
                                                                                                                "childComponents": [
                                                                                                                    {
                                                                                                                        "type": "Literal",
                                                                                                                        "dataKey": "Id"
                                                                                                                    }
                                                                                                                ]
                                                                                                            },
                                                                                                            {
                                                                                                                "type": "DataGridColumn",
                                                                                                                "caption": "Product Type",
                                                                                                                "styles": {
                                                                                                                    "flexGrow": 2
                                                                                                                },
                                                                                                                "dataKey": "ProductTypeName",
                                                                                                                "childComponents": [
                                                                                                                    {
                                                                                                                        "type": "Link",
                                                                                                                        "dataKey": "ProductTypeName",
                                                                                                                        "url": {
                                                                                                                            "$func": "template",
                                                                                                                            "template": "{parentBusinessContext}/{parentEntityId}/{parentBusinessContext}/{previousEntityId}/portfolioEntity/{mode}/{parentBusinessContext}/{previousEntityId}/Product/{productId}/product/{mode}",
                                                                                                                            "values": {
                                                                                                                                "productId": {
                                                                                                                                    "$func": "fieldValue",
                                                                                                                                    "field": "Id"
                                                                                                                                },
                                                                                                                                "parentBusinessContext": {
                                                                                                                                    "$func": "value",
                                                                                                                                    "scope": "DynamicRouter.params",
                                                                                                                                    "field": "ParentBusinessContext"
                                                                                                                                },
                                                                                                                                "parentEntityId": {
                                                                                                                                    "$func": "isDefined",
                                                                                                                                    "value": {
                                                                                                                                        "$func": "value",
                                                                                                                                        "scope": "DynamicRouter.params",
                                                                                                                                        "field": "EntityId"
                                                                                                                                    },
                                                                                                                                    "then": {
                                                                                                                                        "$func": "value",
                                                                                                                                        "scope": "DynamicRouter.params",
                                                                                                                                        "field": "EntityId"
                                                                                                                                    },
                                                                                                                                    "else": {
                                                                                                                                        "$func": "value",
                                                                                                                                        "field": "ParentEntityId",
                                                                                                                                        "scope": "DynamicRouter.params"
                                                                                                                                    }
                                                                                                                                },
                                                                                                                                "previousEntityId": {
                                                                                                                                    "$func": "value",
                                                                                                                                    "field": "Id",
                                                                                                                                    "scope": "DataGridContent.PortfolioEntityCard"
                                                                                                                                },
                                                                                                                                "mode": {
                                                                                                                                    "$func": "switch",
                                                                                                                                    "value": {
                                                                                                                                        "$func": "or",
                                                                                                                                        "operands": [
                                                                                                                                            {
                                                                                                                                                "$func": "value",
                                                                                                                                                "scope": "DynamicRouter.params",
                                                                                                                                                "field": "Mode",
                                                                                                                                                "notEquals": "Edit"
                                                                                                                                            },
                                                                                                                                            {
                                                                                                                                                "$func": "value",
                                                                                                                                                "field": "AuthorisationCode",
                                                                                                                                                "notMatchMask": "generic.edit"
                                                                                                                                            },
                                                                                                                                            {
                                                                                                                                                "$func": "fieldValue",
                                                                                                                                                "field": "Task_StatusId",
                                                                                                                                                "equals": "2"
                                                                                                                                            }
                                                                                                                                        ]
                                                                                                                                    },
                                                                                                                                    "cases": {
                                                                                                                                        "true": "View",
                                                                                                                                        "false": "Edit"
                                                                                                                                    }
                                                                                                                                }
                                                                                                                            }
                                                                                                                        },
                                                                                                                        "hidden": {
                                                                                                                            "$func": "and",
                                                                                                                            "operands": [
                                                                                                                                {
                                                                                                                                    "$func": "value",
                                                                                                                                    "field": "AuthorisationCode",
                                                                                                                                    "notMatchMask": "generic.edit"
                                                                                                                                },
                                                                                                                                {
                                                                                                                                    "$func": "value",
                                                                                                                                    "field": "AuthorisationCode",
                                                                                                                                    "notMatchMask": "generic.view"
                                                                                                                                }
                                                                                                                            ]
                                                                                                                        }
                                                                                                                    }
                                                                                                                ]
                                                                                                            },
                                                                                                            {
                                                                                                                "type": "DataGridColumn",
                                                                                                                "caption": "Product Category",
                                                                                                                "styles": {
                                                                                                                    "flexGrow": 2
                                                                                                                },
                                                                                                                "dataKey": "ProductCategory",
                                                                                                                "childComponents": [
                                                                                                                    {
                                                                                                                        "type": "Literal",
                                                                                                                        "dataKey": "ProductCategory"
                                                                                                                    }
                                                                                                                ]
                                                                                                            },
                                                                                                            {
                                                                                                                "type": "DataGridColumn",
                                                                                                                "caption": "Booking Entity",
                                                                                                                "styles": {
                                                                                                                    "flexGrow": 2
                                                                                                                },
                                                                                                                "dataKey": "BookingEntityName",
                                                                                                                "childComponents": [
                                                                                                                    {
                                                                                                                        "type": "Literal",
                                                                                                                        "dataKey": "BookingEntityName"
                                                                                                                    }
                                                                                                                ]
                                                                                                            },
                                                                                                            {
                                                                                                                "type": "DataGridColumn",
                                                                                                                "caption": "Country",
                                                                                                                "dataKey": "CountryName",
                                                                                                                "childComponents": [
                                                                                                                    {
                                                                                                                        "type": "Literal",
                                                                                                                        "dataKey": "CountryName"
                                                                                                                    }
                                                                                                                ]
                                                                                                            },
                                                                                                            {
                                                                                                                "type": "DataGridColumn",
                                                                                                                "caption": "Region",
                                                                                                                "dataKey": "RegionName",
                                                                                                                "childComponents": [
                                                                                                                    {
                                                                                                                        "type": "Literal",
                                                                                                                        "dataKey": "RegionName"
                                                                                                                    }
                                                                                                                ]
                                                                                                            },
                                                                                                            {
                                                                                                                "type": "DataGridColumn",
                                                                                                                "caption": "Risk Category",
                                                                                                                "dataKey": "ProductRiskCategoryName",
                                                                                                                "childComponents": [
                                                                                                                    {
                                                                                                                        "type": "StatusIndicator",
                                                                                                                        "dataKey": "ProductRiskCategoryName"
                                                                                                                    }
                                                                                                                ]
                                                                                                            },
                                                                                                            {
                                                                                                                "type": "DataGridColumn",
                                                                                                                "caption": "Owner",
                                                                                                                "styles": {
                                                                                                                    "flexGrow": 2
                                                                                                                },
                                                                                                                "dataKey": "Owner",
                                                                                                                "childComponents": [
                                                                                                                    {
                                                                                                                        "type": "Literal",
                                                                                                                        "dataKey": "Owner"
                                                                                                                    }
                                                                                                                ]
                                                                                                            },
                                                                                                            {
                                                                                                                "type": "DataGridColumn",
                                                                                                                "caption": "Managed By",
                                                                                                                "styles": {
                                                                                                                    "flexGrow": 2
                                                                                                                },
                                                                                                                "dataKey": "ManagedBy",
                                                                                                                "childComponents": [
                                                                                                                    {
                                                                                                                        "type": "Literal",
                                                                                                                        "dataKey": "ManagedBy"
                                                                                                                    }
                                                                                                                ]
                                                                                                            },
                                                                                                            {
                                                                                                                "type": "DataGridColumn",
                                                                                                                "caption": "Fund Code",
                                                                                                                "dataKey": "FundCode",
                                                                                                                "childComponents": [
                                                                                                                    {
                                                                                                                        "type": "Literal",
                                                                                                                        "dataKey": "FundCode"
                                                                                                                    }
                                                                                                                ]
                                                                                                            },
                                                                                                            {
                                                                                                                "type": "DataGridColumn",
                                                                                                                "hidden": true,
                                                                                                                "dataKey": "Product_CreatedDate",
                                                                                                                "childComponents": [
                                                                                                                    {
                                                                                                                        "type": "Literal",
                                                                                                                        "dataKey": "Product_CreatedDate"
                                                                                                                    }
                                                                                                                ]
                                                                                                            },
                                                                                                            {
                                                                                                                "type": "DataGridColumn",
                                                                                                                "caption": "Status",
                                                                                                                "dataKey": "Status",
                                                                                                                "childComponents": [
                                                                                                                    {
                                                                                                                        "type": "Literal",
                                                                                                                        "dataKey": "Status"
                                                                                                                    }
                                                                                                                ]
                                                                                                            }
                                                                                                        ]
                                                                                                    }
                                                                                                ]
                                                                                            }
                                                                                        ]
                                                                                    }
                                                                                ]
                                                                            }
                                                                        ]
                                                                    }
                                                                ]
                                                            }
                                                        ]
                                                    }
                                                ]
                                            }
                                        ]
                                    },
                                    {
                                        "type": "DataGridTable",
                                        "childComponents": [
                                            {
                                                "type": "DataGridHeader"
                                            },
                                            {
                                                "type": "DataGridRow",
                                                "childComponents": [
                                                    {
                                                        "type": "DataGridColumn",
                                                        "caption": "ID",
                                                        "styles": {
                                                            "flexBasis": "50px",
                                                            "flexGrow": 0.5,
                                                            "flexShrink": 0.5
                                                        },
                                                        "dataKey": "Id",
                                                        "sortable": true,
                                                        "childComponents": [
                                                            {
                                                                "type": "Literal",
                                                                "dataKey": "Id"
                                                            }
                                                        ]
                                                    },
                                                    {
                                                        "type": "DataGridColumn",
                                                        "caption": "CaseAssociationId",
                                                        "hidden": true,
                                                        "dataKey": "CaseAssociationId",
                                                        "sortable": false,
                                                        "childComponents": [
                                                            {
                                                                "type": "Literal",
                                                                "dataKey": "CaseAssociationId"
                                                            }
                                                        ]
                                                    },
                                                    {
                                                        "type": "DataGridColumn",
                                                        "caption": "TradingEntityOwnedById",
                                                        "hidden": true,
                                                        "dataKey": "TradingEntityOwnedById",
                                                        "sortable": false,
                                                        "childComponents": [
                                                            {
                                                                "type": "Literal",
                                                                "dataKey": "TradingEntityOwnedById"
                                                            }
                                                        ]
                                                    },
                                                    {
                                                        "type": "DataGridColumn",
                                                        "caption": "TradingEntityTypeId",
                                                        "hidden": true,
                                                        "dataKey": "TradingEntityTypeId",
                                                        "sortable": false,
                                                        "childComponents": [
                                                            {
                                                                "type": "Literal",
                                                                "dataKey": "TradingEntityTypeId"
                                                            }
                                                        ]
                                                    },
                                                    {
                                                        "type": "DataGridColumn",
                                                        "caption": "Type",
                                                        "styles": {
                                                            "flexGrow": 2
                                                        },
                                                        "dataKey": "TradingEntityType",
                                                        "sortable": true,
                                                        "childComponents": [
                                                            {
                                                                "type": "Literal",
                                                                "dataKey": "TradingEntityType"
                                                            }
                                                        ]
                                                    },
                                                    {
                                                        "type": "DataGridColumn",
                                                        "caption": "Name",
                                                        "className": "overflow-hidden",
                                                        "styles": {
                                                            "flexBasis": "30%",
                                                            "minWidth": "30%",
                                                            "maxWidth": "70%"
                                                        },
                                                        "dataKey": "LegalEntityName",
                                                        "sortable": true,
                                                        "childComponents": [
                                                            {
                                                                "type": "Link",
                                                                "dataKey": "LegalEntityName",
                                                                "to": {
                                                                    "pathname": {
                                                                        "$func": "template",
                                                                        "template": "{businessContext}/{entityId}/LegalEntity/{tradingEntityId}/portfolioEntity/{mode}",
                                                                        "values": {
                                                                            "businessContext": {
                                                                                "$func": "value",
                                                                                "scope": "DynamicRouter.params",
                                                                                "field": "ParentBusinessContext"
                                                                            },
                                                                            "entityId": {
                                                                                "$func": "isDefined",
                                                                                "value": {
                                                                                    "$func": "value",
                                                                                    "scope": "DynamicRouter.params",
                                                                                    "field": "EntityId"
                                                                                },
                                                                                "then": {
                                                                                    "$func": "value",
                                                                                    "scope": "DynamicRouter.params",
                                                                                    "field": "EntityId"
                                                                                },
                                                                                "else": {
                                                                                    "$func": "value",
                                                                                    "scope": "DynamicRouter.params",
                                                                                    "field": "ParentEntityId"
                                                                                }
                                                                            },
                                                                            "tradingEntityId": {
                                                                                "$func": "fieldValue",
                                                                                "field": "Id"
                                                                            },
                                                                            "mode": {
                                                                                "$func": "switch",
                                                                                "value": {
                                                                                    "$func": "or",
                                                                                    "operands": [
                                                                                        {
                                                                                            "$func": "value",
                                                                                            "field": "AuthorisationCode",
                                                                                            "notMatchMask": "generic.edit"
                                                                                        },
                                                                                        {
                                                                                            "$func": "value",
                                                                                            "scope": "DynamicRouter.params",
                                                                                            "field": "Mode",
                                                                                            "notEquals": "Edit"
                                                                                        },
                                                                                        {
                                                                                            "$func": "fieldValue",
                                                                                            "field": "Task_StatusId",
                                                                                            "equals": "2"
                                                                                        }
                                                                                    ]
                                                                                },
                                                                                "cases": {
                                                                                    "true": "View",
                                                                                    "false": "Edit"
                                                                                }
                                                                            }
                                                                        }
                                                                    },
                                                                    "hidden": {
                                                                        "$func": "and",
                                                                        "operands": [
                                                                            {
                                                                                "$func": "value",
                                                                                "field": "AuthorisationCode",
                                                                                "notMatchMask": "generic.edit"
                                                                            },
                                                                            {
                                                                                "$func": "value",
                                                                                "field": "AuthorisationCode",
                                                                                "notMatchMask": "generic.view"
                                                                            }
                                                                        ]
                                                                    }
                                                                }
                                                            }
                                                        ]
                                                    },
                                                    {
                                                        "type": "DataGridColumn",
                                                        "caption": "Identifier",
                                                        "styles": {
                                                            "flexGrow": 3
                                                        },
                                                        "dataKey": "TradingEntityIdentifier",
                                                        "sortable": true,
                                                        "childComponents": [
                                                            {
                                                                "type": "Literal",
                                                                "dataKey": "TradingEntityIdentifier"
                                                            }
                                                        ]
                                                    },
                                                    {
                                                        "type": "DataGridColumn",
                                                        "caption": "Status",
                                                        "styles": {
                                                            "flexGrow": 2
                                                        },
                                                        "dataKey": "TradingEntityStatus",
                                                        "sortable": true,
                                                        "childComponents": [
                                                            {
                                                                "type": "Literal",
                                                                "dataKey": "TradingEntityStatus"
                                                            }
                                                        ]
                                                    },
                                                    {
                                                        "type": "DataGridColumn",
                                                        "caption": "Owner",
                                                        "className": "overflow-hidden",
                                                        "styles": {
                                                            "flexBasis": "20%",
                                                            "minWidth": "20%",
                                                            "maxWidth": "20%"
                                                        },
                                                        "dataKey": "TradingEntityOwnedByName",
                                                        "sortable": true,
                                                        "childComponents": [
                                                            {
                                                                "type": "Link",
                                                                "url": {
                                                                    "$func": "template",
                                                                    "template": "/app/{legalEntityId}/LegalEntity/{legalEntityId}/le360",
                                                                    "values": {
                                                                        "legalEntityId": {
                                                                            "$func": "fieldValue",
                                                                            "field": "TradingEntityOwnedById"
                                                                        }
                                                                    }
                                                                }
                                                            }
                                                        ]
                                                    },
                                                    {
                                                        "type": "DataGridColumn",
                                                        "caption": "Managed By",
                                                        "styles": {
                                                            "flexGrow": 2
                                                        },
                                                        "dataKey": "TradingEntityManagedByName",
                                                        "sortable": true,
                                                        "childComponents": [
                                                            {
                                                                "type": "Link",
                                                                "url": {
                                                                    "$func": "template",
                                                                    "template": "/app/{legalEntityId}/LegalEntity/{legalEntityId}/le360",
                                                                    "values": {
                                                                        "legalEntityId": {
                                                                            "$func": "fieldValue",
                                                                            "field": "TradingEntityManagedById"
                                                                        }
                                                                    }
                                                                }
                                                            }
                                                        ]
                                                    }
                                                ]
                                            }
                                        ]
                                    }
                                ]
                            },
                            {
                                "type": "Button",
                                "name": "submitPortfolios",
                                "caption": "Select",
                                "mode": "Primary",
                                "workingIndicator": true,
                                "onClick": [
                                    {
                                        "behaviour": "setValue",
                                        "provider": "FormArea",
                                        "namespace": "RelinkingRequestFormArea",
                                        "argument": {
                                            "fieldName": "SelectedPortfolios",
                                            "value": {
                                                "$func": "join",
                                                "separator": ",",
                                                "value": {
                                                    "$func": "value",
                                                    "field": "currentSelection",
                                                    "prop": "items",
                                                    "scope": "DataGrid.PortfolioEntityCard"
                                                }
                                            }
                                        }
                                    },
                                    {
                                        "behaviour": "setValue",
                                        "provider": "FormArea",
                                        "namespace": "RelinkingRequestFormArea",
                                        "argument": {
                                            "fieldName": "RelinkRequestStage",
                                            "value": "confirm-request"
                                        }
                                    },{
                                        "provider": "ApiProvider",
                                        "namespace": "getSelectedPortfolios",
                                        "behaviour": "request"
                                    }
                                ]
                            },
                            {
                                "type": "Button",
                                "name": "submitPortfolios",
                                "caption": "Back",
                                "mode": "Secondary",
                                "onClick": [
                                    {
                                        "behaviour": "setValue",
                                        "provider": "FormArea",
                                        "namespace": "RelinkingRequestFormArea",
                                        "argument": {
                                            "fieldName": "RelinkRequestStage",
                                            "value": "select-target"
                                        }
                                    }
                                ]
                            }
                        ]
                    },
                    {
                        "type": "PanelPart",
                        "caption": "Confirm Request",
                        "name": "Confirmation",
                        "headerLevel": 1,
                        "collapsibleDisabled": true,
                        "hidden": {
                            "$func": "fieldValue",
                            "field": "RelinkRequestStage",
                            "notEquals": "confirm-request",
                            "scope": "FormArea.RelinkingRequestFormArea"
                        },
                        "childComponents": [
                            {
                                "type": "Breadcrumbs",
                                "excludes": [
                                    "LE 360"
                                ]
                            },
                            {
                                "type": "ApiProvider",
                                "verb": "POST",
                                "name": "getSelectedPortfolios",
                                "requestImmediately": true,
                                "forceRequest": true,
                                "endpointMethod": "search",
                                "onBeforeRequest": [
                                    {
                                        "provider": "PageBuilder",
                                        "behaviour": "waitForLookups"
                                    }
                                ],
                                "dataGridName": "SelectedPortfolioEntityCard",
                                "body": {
                                    "requestContext": "TradingEntitiesGrid",
                                    "dataSourceName": "Fenergo",
                                    "searchCriteria": [
                                        {
                                            "Name": "Id",
                                            "Type": "multiselect",
                                            "Value": {
                                                "$func": "value",
                                                "field": "SelectedPortfolios",
                                                "scope": "FormArea.RelinkingRequestFormArea"
                                            },
                                            "matchType": "In"
                                        },
                                        {
                                            "Name": "TradingEntityTypeId",
                                            "type": "multiselect",
                                            "value": "4532,4533",
                                            "matchType": "In"
                                        }
                                    ]
                                },
                                "onFailure": [
                                    {
                                        "behaviour": "addMessages",
                                        "provider": "MessageScope",
                                        "argument": {
                                            "messages": {
                                                "$func": "data",
                                                "scope": "ApiProvider.getPortfolios",
                                                "jsonPathQuery": "$.messages[*]"
                                            }
                                        }
                                    }
                                ]
                            },
                            {
                                "type": "DataGrid",
                                "name": "SelectedPortfolioEntityCard",
                                "dataSourceUniqueKeyName": "Id",
                                "initialSortingColumn": "Id",
                                "noResultsMessage": "No porftolios selected",
                                "renderMode": "cards",
                                "childComponents": [
                                    {
                                        "type": "DataGridCard",
                                        "childComponents": [
                                            {
                                                "type": "DataGridExpandableRow",
                                                "childComponents": [
                                                    {
                                                        "type": "LayoutFlexBox",
                                                        "name": "LayoutFlexBoxPortfolioProductsGrid",
                                                        "className": "fen-flexbox-container--spaced",
                                                        "flexDirection": "row",
                                                        "flexWrap": "wrap",
                                                        "justifyContent": "space-between",
                                                        "flexItemsWidth": "350px",
                                                        "childComponents": [
                                                            {
                                                                "type": "LayoutFlexBoxItem",
                                                                "name": "LayoutFlexBoxItemPortfolioProductsGrid",
                                                                "flexGrow": 1,
                                                                "childComponents": [
                                                                    {
                                                                        "type": "Content",
                                                                        "childComponents": [
                                                                            {
                                                                                "type": "PanelPart",
                                                                                "caption": {
                                                                                    "$func": "value",
                                                                                    "field": "TradingEntityTypeId",
                                                                                    "scope": "  .PortfolioEntityCard",
                                                                                    "equals": 11501,
                                                                                    "then": "Managed Products",
                                                                                    "else": "Products"
                                                                                },
                                                                                "name": "PortfolioRelatedProducts",
                                                                                "headerLevel": 3,
                                                                                "stroke": false,
                                                                                "collapsed": false,
                                                                                "renderAnchor": false,
                                                                                "collapsibleDisabled": true,
                                                                                "childComponents": [
                                                                                    {
                                                                                        "type": "ApiProvider",
                                                                                        "verb": "POST",
                                                                                        "name": "PortfolioProducts",
                                                                                        "requestImmediately": true,
                                                                                        "forceRequest": true,
                                                                                        "endpointMethod": "search",
                                                                                        "dataGridName": "PortfolioProductsGrid",
                                                                                        "body": {
                                                                                            "pagerRequest": {
                                                                                                "sortDirection": "DESC",
                                                                                                "sortingColumn": "LegalEntityId",
                                                                                                "minRowNumber": 1,
                                                                                                "maxRowNumber": 10
                                                                                            },
                                                                                            "requestContext": "getProductsAssociatedToTEToUPToIM",
                                                                                            "dataSourceName": "Fenergo",
                                                                                            "searchCriteria": [
                                                                                                {
                                                                                                    "name": "TEId",
                                                                                                    "type": "int",
                                                                                                    "Value": {
                                                                                                        "$func": "value",
                                                                                                        "field": "Id",
                                                                                                        "scope": "DataGridContent.PortfolioEntityCard"
                                                                                                    },
                                                                                                    "matchType": "Equals"
                                                                                                }
                                                                                            ]
                                                                                        },
                                                                                        "onFailure": [
                                                                                            {
                                                                                                "behaviour": "addMessages",
                                                                                                "provider": "MessageScope",
                                                                                                "argument": {
                                                                                                    "messages": {
                                                                                                        "$func": "data",
                                                                                                        "scope": "ApiProvider.PortfolioProducts",
                                                                                                        "jsonPathQuery": "$.messages[*]"
                                                                                                    }
                                                                                                }
                                                                                            }
                                                                                        ]
                                                                                    },
                                                                                    {
                                                                                        "type": "DataGrid",
                                                                                        "name": "PortfolioProductsGrid",
                                                                                        "dataSourceUniqueKeyName": "Id",
                                                                                        "noResultsMessage": "No products added",
                                                                                        "renderMode": "cards",
                                                                                        "childComponents": [
                                                                                            {
                                                                                                "type": "DataGridCard",
                                                                                                "childComponents": [
                                                                                                    {
                                                                                                        "type": "DataGridExpandableRow",
                                                                                                        "childComponents": [
                                                                                                            {
                                                                                                                "type": "LayoutFlexBox",
                                                                                                                "className": "fen-flexbox-container--spaced",
                                                                                                                "flexDirection": "row",
                                                                                                                "flexWrap": "wrap",
                                                                                                                "justifyContent": "space-between",
                                                                                                                "flexItemsWidth": "350px",
                                                                                                                "childComponents": [
                                                                                                                    {
                                                                                                                        "type": "LayoutFlexBoxItem",
                                                                                                                        "flexGrow": 1,
                                                                                                                        "childComponents": [
                                                                                                                            {
                                                                                                                                "type": "PanelPart",
                                                                                                                                "headerLevel": 3,
                                                                                                                                "stroke": false,
                                                                                                                                "collapsibleDisabled": true,
                                                                                                                                "hidden": false,
                                                                                                                                "childComponents": [
                                                                                                                                    {
                                                                                                                                        "type": "Content",
                                                                                                                                        "childComponents": [
                                                                                                                                            {
                                                                                                                                                "type": "PanelPart",
                                                                                                                                                "name": "portfolioEntityProductAccounts",
                                                                                                                                                "caption": "Accounts",
                                                                                                                                                "headerLevel": 3,
                                                                                                                                                "stroke": false,
                                                                                                                                                "collapsed": false,
                                                                                                                                                "renderAnchor": false,
                                                                                                                                                "collapsibleDisabled": true,
                                                                                                                                                "childComponents": [
                                                                                                                                                    {
                                                                                                                                                        "type": "ApiProvider",
                                                                                                                                                        "verb": "POST",
                                                                                                                                                        "name": "portfolioEntityProductAccountsPanel",
                                                                                                                                                        "requestImmediately": true,
                                                                                                                                                        "forceRequest": true,
                                                                                                                                                        "endpointMethod": "search",
                                                                                                                                                        "dataGridName": "portfolioEntityProductAccountsGrid",
                                                                                                                                                        "body": {
                                                                                                                                                            "requestContext": "productAccount",
                                                                                                                                                            "dataSourceName": "Fenergo",
                                                                                                                                                            "searchCriteria": [
                                                                                                                                                                {
                                                                                                                                                                    "Name": "AccountProductId",
                                                                                                                                                                    "Type": "int",
                                                                                                                                                                    "Value": {
                                                                                                                                                                        "$func": "value",
                                                                                                                                                                        "field": "Id",
                                                                                                                                                                        "scope": "DataGridContent.PortfolioProductsGrid"
                                                                                                                                                                    }
                                                                                                                                                                }
                                                                                                                                                            ]
                                                                                                                                                        },
                                                                                                                                                        "onFailure": [
                                                                                                                                                            {
                                                                                                                                                                "behaviour": "addMessages",
                                                                                                                                                                "provider": "MessageScope",
                                                                                                                                                                "argument": {
                                                                                                                                                                    "messages": {
                                                                                                                                                                        "$func": "data",
                                                                                                                                                                        "scope": "ApiProvider.portfolioEntityProductAccountsPanel",
                                                                                                                                                                        "jsonPathQuery": "$.messages[*]"
                                                                                                                                                                    }
                                                                                                                                                                }
                                                                                                                                                            }
                                                                                                                                                        ]
                                                                                                                                                    },
                                                                                                                                                    {
                                                                                                                                                        "type": "DataGrid",
                                                                                                                                                        "name": "portfolioEntityProductAccountsGrid",
                                                                                                                                                        "data": {},
                                                                                                                                                        "noResultsMessage": "No accounts added",
                                                                                                                                                        "dataSourceUniqueKeyName": "AccountId",
                                                                                                                                                        "initialSortingColumn": "AccountLastUpdatedDate",
                                                                                                                                                        "allowRowSelection": "none",
                                                                                                                                                        "childComponents": [
                                                                                                                                                            {
                                                                                                                                                                "type": "DataGridTable",
                                                                                                                                                                "childComponents": [
                                                                                                                                                                    {
                                                                                                                                                                        "type": "DataGridHeader"
                                                                                                                                                                    },
                                                                                                                                                                    {
                                                                                                                                                                        "type": "DataGridRow",
                                                                                                                                                                        "childComponents": [
                                                                                                                                                                            {
                                                                                                                                                                                "type": "DataGridColumn",
                                                                                                                                                                                "caption": "ID",
                                                                                                                                                                                "dataKey": "AccountId",
                                                                                                                                                                                "styles": {
                                                                                                                                                                                    "flexBasis": "30px"
                                                                                                                                                                                },
                                                                                                                                                                                "childComponents": [
                                                                                                                                                                                    {
                                                                                                                                                                                        "type": "Link",
                                                                                                                                                                                        "dataKey": "AccountId",
                                                                                                                                                                                        "disabled": {
                                                                                                                                                                                            "$func": "and",
                                                                                                                                                                                            "operands": [
                                                                                                                                                                                                {
                                                                                                                                                                                                    "$func": "value",
                                                                                                                                                                                                    "field": "AuthorisationCode",
                                                                                                                                                                                                    "notMatchMask": "generic.edit"
                                                                                                                                                                                                },
                                                                                                                                                                                                {
                                                                                                                                                                                                    "$func": "value",
                                                                                                                                                                                                    "field": "AuthorisationCode",
                                                                                                                                                                                                    "notMatchMask": "generic.view"
                                                                                                                                                                                                }
                                                                                                                                                                                            ]
                                                                                                                                                                                        },
                                                                                                                                                                                        "url": {
                                                                                                                                                                                            "$func": "template",
                                                                                                                                                                                            "template": "{parentBusinessContext}/{parentEntityId}/{parentBusinessContext}/{portfolioId}/portfolioEntity/{mode}/{parentBusinessContext}/{portfolioId}/Product/{productId}/product/{mode}/Product/{productId}/Account/{accountid}/{accounttype}/{mode}",
                                                                                                                                                                                            "values": {
                                                                                                                                                                                                "productId": {
                                                                                                                                                                                                    "$func": "value",
                                                                                                                                                                                                    "field": "Id",
                                                                                                                                                                                                    "scope": "DataGridContent.PortfolioProductsGrid"
                                                                                                                                                                                                },
                                                                                                                                                                                                "parentBusinessContext": {
                                                                                                                                                                                                    "$func": "value",
                                                                                                                                                                                                    "scope": "DynamicRouter.params",
                                                                                                                                                                                                    "field": "ParentBusinessContext"
                                                                                                                                                                                                },
                                                                                                                                                                                                "parentEntityId": {
                                                                                                                                                                                                    "$func": "isDefined",
                                                                                                                                                                                                    "value": {
                                                                                                                                                                                                        "$func": "value",
                                                                                                                                                                                                        "scope": "DynamicRouter.params",
                                                                                                                                                                                                        "field": "EntityId"
                                                                                                                                                                                                    },
                                                                                                                                                                                                    "then": {
                                                                                                                                                                                                        "$func": "value",
                                                                                                                                                                                                        "scope": "DynamicRouter.params",
                                                                                                                                                                                                        "field": "EntityId"
                                                                                                                                                                                                    },
                                                                                                                                                                                                    "else": {
                                                                                                                                                                                                        "$func": "value",
                                                                                                                                                                                                        "field": "ParentEntityId",
                                                                                                                                                                                                        "scope": "DynamicRouter.params"
                                                                                                                                                                                                    }
                                                                                                                                                                                                },
                                                                                                                                                                                                "accountid": {
                                                                                                                                                                                                    "$func": "fieldValue",
                                                                                                                                                                                                    "field": "AccountId"
                                                                                                                                                                                                },
                                                                                                                                                                                                "portfolioId": {
                                                                                                                                                                                                    "$func": "value",
                                                                                                                                                                                                    "field": "Id",
                                                                                                                                                                                                    "scope": "DataGridContent.PortfolioEntityCard"
                                                                                                                                                                                                },
                                                                                                                                                                                                "accounttype": {
                                                                                                                                                                                                    "$func": "switch",
                                                                                                                                                                                                    "value": {
                                                                                                                                                                                                        "$func": "fieldValue",
                                                                                                                                                                                                        "field": "AccountType"
                                                                                                                                                                                                    },
                                                                                                                                                                                                    "cases": {
                                                                                                                                                                                                        "5000": "wss",
                                                                                                                                                                                                        "5001": "calypso"
                                                                                                                                                                                                    }
                                                                                                                                                                                                },
                                                                                                                                                                                                "mode": {
                                                                                                                                                                                                    "$func": "switch",
                                                                                                                                                                                                    "value": {
                                                                                                                                                                                                        "$func": "or",
                                                                                                                                                                                                        "operands": [
                                                                                                                                                                                                            {
                                                                                                                                                                                                                "$func": "value",
                                                                                                                                                                                                                "scope": "DynamicRouter.params",
                                                                                                                                                                                                                "field": "Mode",
                                                                                                                                                                                                                "notEquals": "Edit"
                                                                                                                                                                                                            },
                                                                                                                                                                                                            {
                                                                                                                                                                                                                "$func": "value",
                                                                                                                                                                                                                "scope": "DynamicRouter.params",
                                                                                                                                                                                                                "field": "Mode",
                                                                                                                                                                                                                "equals": "EditStatus"
                                                                                                                                                                                                            },
                                                                                                                                                                                                            {
                                                                                                                                                                                                                "$func": "fieldValue",
                                                                                                                                                                                                                "field": "Task_StatusId",
                                                                                                                                                                                                                "equals": "2"
                                                                                                                                                                                                            },
                                                                                                                                                                                                            {
                                                                                                                                                                                                                "$func": "value",
                                                                                                                                                                                                                "field": "AuthorisationCode",
                                                                                                                                                                                                                "notMatchMask": "generic.edit"
                                                                                                                                                                                                            },
                                                                                                                                                                                                            {
                                                                                                                                                                                                                "$func": "value",
                                                                                                                                                                                                                "scope": "DataGridContent.PortfolioProductsGrid",
                                                                                                                                                                                                                "field": "Product_CreatedDate",
                                                                                                                                                                                                                "dateLessThan": {
                                                                                                                                                                                                                    "$func": "value",
                                                                                                                                                                                                                    "scope": "DataGridContent.PortfolioEntityCard",
                                                                                                                                                                                                                    "field": "CaseCreatedDate"
                                                                                                                                                                                                                }
                                                                                                                                                                                                            }
                                                                                                                                                                                                        ]
                                                                                                                                                                                                    },
                                                                                                                                                                                                    "cases": {
                                                                                                                                                                                                        "true": "View",
                                                                                                                                                                                                        "false": "Edit"
                                                                                                                                                                                                    }
                                                                                                                                                                                                }
                                                                                                                                                                                            }
                                                                                                                                                                                        }
                                                                                                                                                                                    }
                                                                                                                                                                                ]
                                                                                                                                                                            },
                                                                                                                                                                            {
                                                                                                                                                                                "type": "DataGridColumn",
                                                                                                                                                                                "caption": "Type",
                                                                                                                                                                                "dataKey": "AccountTypeName",
                                                                                                                                                                                "childComponents": [
                                                                                                                                                                                    {
                                                                                                                                                                                        "type": "Literal",
                                                                                                                                                                                        "dataKey": "AccountTypeName"
                                                                                                                                                                                    }
                                                                                                                                                                                ]
                                                                                                                                                                            },
                                                                                                                                                                            {
                                                                                                                                                                                "type": "DataGridColumn",
                                                                                                                                                                                "caption": "Owner",
                                                                                                                                                                                "dataKey": "AccountOwner",
                                                                                                                                                                                "childComponents": [
                                                                                                                                                                                    {
                                                                                                                                                                                        "type": "Literal",
                                                                                                                                                                                        "dataKey": "AccountOwner"
                                                                                                                                                                                    }
                                                                                                                                                                                ]
                                                                                                                                                                            },
                                                                                                                                                                            {
                                                                                                                                                                                "type": "DataGridColumn",
                                                                                                                                                                                "caption": "IM",
                                                                                                                                                                                "dataKey": "AccountIM",
                                                                                                                                                                                "childComponents": [
                                                                                                                                                                                    {
                                                                                                                                                                                        "type": "Literal",
                                                                                                                                                                                        "dataKey": "AccountIM"
                                                                                                                                                                                    }
                                                                                                                                                                                ]
                                                                                                                                                                            },
                                                                                                                                                                            {
                                                                                                                                                                                "type": "DataGridColumn",
                                                                                                                                                                                "caption": "A/C status",
                                                                                                                                                                                "dataKey": "AccountStatus",
                                                                                                                                                                                "childComponents": [
                                                                                                                                                                                    {
                                                                                                                                                                                        "type": "Literal",
                                                                                                                                                                                        "dataKey": "AccountStatus"
                                                                                                                                                                                    }
                                                                                                                                                                                ]
                                                                                                                                                                            },
                                                                                                                                                                            {
                                                                                                                                                                                "type": "DataGridColumn",
                                                                                                                                                                                "caption": "Name",
                                                                                                                                                                                "dataKey": "AccountName",
                                                                                                                                                                                "childComponents": [
                                                                                                                                                                                    {
                                                                                                                                                                                        "type": "Literal",
                                                                                                                                                                                        "dataKey": "AccountName"
                                                                                                                                                                                    }
                                                                                                                                                                                ]
                                                                                                                                                                            },
                                                                                                                                                                            {
                                                                                                                                                                                "type": "DataGridColumn",
                                                                                                                                                                                "caption": "Reference",
                                                                                                                                                                                "dataKey": "AccountReference",
                                                                                                                                                                                "childComponents": [
                                                                                                                                                                                    {
                                                                                                                                                                                        "type": "Literal",
                                                                                                                                                                                        "dataKey": "AccountReference"
                                                                                                                                                                                    }
                                                                                                                                                                                ]
                                                                                                                                                                            },
                                                                                                                                                                            {
                                                                                                                                                                                "type": "DataGridColumn",
                                                                                                                                                                                "caption": "Date created",
                                                                                                                                                                                "dataKey": "AccountCreatedDate",
                                                                                                                                                                                "childComponents": [
                                                                                                                                                                                    {
                                                                                                                                                                                        "type": "DateLiteral",
                                                                                                                                                                                        "dataKey": "AccountCreatedDate"
                                                                                                                                                                                    }
                                                                                                                                                                                ]
                                                                                                                                                                            },
                                                                                                                                                                            {
                                                                                                                                                                                "type": "DataGridColumn",
                                                                                                                                                                                "caption": "Last Updated Date",
                                                                                                                                                                                "dataKey": "AccountLastUpdatedDate",
                                                                                                                                                                                "childComponents": [
                                                                                                                                                                                    {
                                                                                                                                                                                        "type": "DateLiteral",
                                                                                                                                                                                        "dataKey": "AccountLastUpdatedDate"
                                                                                                                                                                                    }
                                                                                                                                                                                ]
                                                                                                                                                                            },
                                                                                                                                                                            {
                                                                                                                                                                                "type": "DataGridColumn",
                                                                                                                                                                                "caption": "Type Id",
                                                                                                                                                                                "dataKey": "AccountType",
                                                                                                                                                                                "hidden": true,
                                                                                                                                                                                "childComponents": [
                                                                                                                                                                                    {
                                                                                                                                                                                        "type": "Literal",
                                                                                                                                                                                        "dataKey": "AccountType"
                                                                                                                                                                                    }
                                                                                                                                                                                ]
                                                                                                                                                                            },
                                                                                                                                                                            {
                                                                                                                                                                                "type": "DataGridColumn",
                                                                                                                                                                                "caption": "Active",
                                                                                                                                                                                "dataKey": "AccountActive",
                                                                                                                                                                                "hidden": true,
                                                                                                                                                                                "childComponents": [
                                                                                                                                                                                    {
                                                                                                                                                                                        "type": "Literal",
                                                                                                                                                                                        "dataKey": "AccountActive"
                                                                                                                                                                                    }
                                                                                                                                                                                ]
                                                                                                                                                                            },
                                                                                                                                                                            {
                                                                                                                                                                                "type": "DataGridColumn",
                                                                                                                                                                                "caption": "Rowversion",
                                                                                                                                                                                "dataKey": "AccountRowVersion",
                                                                                                                                                                                "hidden": true,
                                                                                                                                                                                "childComponents": [
                                                                                                                                                                                    {
                                                                                                                                                                                        "type": "Literal",
                                                                                                                                                                                        "dataKey": "AccountRowVersion"
                                                                                                                                                                                    }
                                                                                                                                                                                ]
                                                                                                                                                                            },
                                                                                                                                                                            {
                                                                                                                                                                                "type": "DataGridColumn",
                                                                                                                                                                                "caption": "Actions",
                                                                                                                                                                                "className": "fixed-width",
                                                                                                                                                                                "childComponents": [
                                                                                                                                                                                    {
                                                                                                                                                                                        "type": "ApiProvider",
                                                                                                                                                                                        "verb": "DELETE",
                                                                                                                                                                                        "endpointMethod": "entityData",
                                                                                                                                                                                        "name": "removeProductAccountPortfolio",
                                                                                                                                                                                        "body": {
                                                                                                                                                                                            "businessContext": "Account",
                                                                                                                                                                                            "entityId": {
                                                                                                                                                                                                "$func": "fieldValue",
                                                                                                                                                                                                "field": "AccountId"
                                                                                                                                                                                            },
                                                                                                                                                                                            "parentBusinessContext": {
                                                                                                                                                                                                "$func": "value",
                                                                                                                                                                                                "scope": "DynamicRouter.params",
                                                                                                                                                                                                "field": "BusinessContext"
                                                                                                                                                                                            },
                                                                                                                                                                                            "parentEntityId": {
                                                                                                                                                                                                "$func": "value",
                                                                                                                                                                                                "scope": "DynamicRouter.params",
                                                                                                                                                                                                "field": "EntityId"
                                                                                                                                                                                            },
                                                                                                                                                                                            "requestContext": {
                                                                                                                                                                                                "$func": "switch",
                                                                                                                                                                                                "value": {
                                                                                                                                                                                                    "$func": "fieldValue",
                                                                                                                                                                                                    "field": "AccountType"
                                                                                                                                                                                                },
                                                                                                                                                                                                "cases": {
                                                                                                                                                                                                    "5000": "removeWssAccount",
                                                                                                                                                                                                    "5001": "removeCalypsoAccount"
                                                                                                                                                                                                }
                                                                                                                                                                                            },
                                                                                                                                                                                            "contextParameters": {
                                                                                                                                                                                                "taskId": {
                                                                                                                                                                                                    "$func": "value",
                                                                                                                                                                                                    "scope": "DynamicRouter.params",
                                                                                                                                                                                                    "field": "TaskId"
                                                                                                                                                                                                },
                                                                                                                                                                                                "legalEntityId": {
                                                                                                                                                                                                    "$func": "value",
                                                                                                                                                                                                    "scope": "DynamicRouter.params",
                                                                                                                                                                                                    "field": "LegalEntityId"
                                                                                                                                                                                                },
                                                                                                                                                                                                "caseId": {
                                                                                                                                                                                                    "$func": "value",
                                                                                                                                                                                                    "scope": "DynamicRouter.params",
                                                                                                                                                                                                    "field": "CaseId"
                                                                                                                                                                                                }
                                                                                                                                                                                            },
                                                                                                                                                                                            "data": {
                                                                                                                                                                                                "AccountRowVersion": {
                                                                                                                                                                                                    "$func": "fieldValue",
                                                                                                                                                                                                    "field": "AccountRowVersion"
                                                                                                                                                                                                }
                                                                                                                                                                                            }
                                                                                                                                                                                        },
                                                                                                                                                                                        "onFailure": [
                                                                                                                                                                                            {
                                                                                                                                                                                                "behaviour": "addMessages",
                                                                                                                                                                                                "provider": "MessageScope",
                                                                                                                                                                                                "argument": {
                                                                                                                                                                                                    "messages": {
                                                                                                                                                                                                        "$func": "data",
                                                                                                                                                                                                        "scope": "ApiProvider.removeProductAccountPortfolio",
                                                                                                                                                                                                        "jsonPathQuery": "$.messages[*]"
                                                                                                                                                                                                    }
                                                                                                                                                                                                }
                                                                                                                                                                                            }
                                                                                                                                                                                        ]
                                                                                                                                                                                    },
                                                                                                                                                                                    {
                                                                                                                                                                                        "type": "ApiProvider",
                                                                                                                                                                                        "verb": "POST",
                                                                                                                                                                                        "endpointMethod": "entityMethod",
                                                                                                                                                                                        "name": "unlinkProductAccountPortfolio",
                                                                                                                                                                                        "body": {
                                                                                                                                                                                            "businessContext": "Account",
                                                                                                                                                                                            "entityId": {
                                                                                                                                                                                                "$func": "fieldValue",
                                                                                                                                                                                                "field": "AccountId"
                                                                                                                                                                                            },
                                                                                                                                                                                            "parentBusinessContext": {
                                                                                                                                                                                                "$func": "value",
                                                                                                                                                                                                "scope": "DynamicRouter.params",
                                                                                                                                                                                                "field": "BusinessContext"
                                                                                                                                                                                            },
                                                                                                                                                                                            "parentEntityId": {
                                                                                                                                                                                                "$func": "value",
                                                                                                                                                                                                "scope": "DynamicRouter.params",
                                                                                                                                                                                                "field": "EntityId"
                                                                                                                                                                                            },
                                                                                                                                                                                            "requestContext": "unlinkAccount"
                                                                                                                                                                                        },
                                                                                                                                                                                        "onFailure": [
                                                                                                                                                                                            {
                                                                                                                                                                                                "behaviour": "addMessages",
                                                                                                                                                                                                "provider": "MessageScope",
                                                                                                                                                                                                "argument": {
                                                                                                                                                                                                    "messages": {
                                                                                                                                                                                                        "$func": "data",
                                                                                                                                                                                                        "scope": "ApiProvider.unlinkProductAccountPortfolio",
                                                                                                                                                                                                        "jsonPathQuery": "$.messages[*]"
                                                                                                                                                                                                    }
                                                                                                                                                                                                }
                                                                                                                                                                                            }
                                                                                                                                                                                        ]
                                                                                                                                                                                    },
                                                                                                                                                                                    {
                                                                                                                                                                                        "type": "ContextMenu",
                                                                                                                                                                                        "name": "ProductAccountActionsPortfolio",
                                                                                                                                                                                        "icon": "ellipsis",
                                                                                                                                                                                        "childComponents": [
                                                                                                                                                                                            {
                                                                                                                                                                                                "type": "Link",
                                                                                                                                                                                                "caption": "Edit",
                                                                                                                                                                                                "hidden": {
                                                                                                                                                                                                    "$func": "or",
                                                                                                                                                                                                    "operands": [
                                                                                                                                                                                                        {
                                                                                                                                                                                                            "$func": "value",
                                                                                                                                                                                                            "scope": "DynamicRouter.params",
                                                                                                                                                                                                            "field": "Mode",
                                                                                                                                                                                                            "notEquals": "Edit"
                                                                                                                                                                                                        },
                                                                                                                                                                                                        {
                                                                                                                                                                                                            "$func": "value",
                                                                                                                                                                                                            "scope": "DynamicRouter.params",
                                                                                                                                                                                                            "field": "Mode",
                                                                                                                                                                                                            "equals": "EditStatus"
                                                                                                                                                                                                        },
                                                                                                                                                                                                        {
                                                                                                                                                                                                            "$func": "fieldValue",
                                                                                                                                                                                                            "field": "Task_StatusId",
                                                                                                                                                                                                            "equals": "2"
                                                                                                                                                                                                        },
                                                                                                                                                                                                        {
                                                                                                                                                                                                            "$func": "value",
                                                                                                                                                                                                            "field": "AuthorisationCode",
                                                                                                                                                                                                            "notMatchMask": "generic.edit"
                                                                                                                                                                                                        },
                                                                                                                                                                                                        {
                                                                                                                                                                                                            "$func": "value",
                                                                                                                                                                                                            "scope": "DataGridContent.PortfolioProductsGrid",
                                                                                                                                                                                                            "field": "Product_CreatedDate",
                                                                                                                                                                                                            "dateLessThan": {
                                                                                                                                                                                                                "$func": "value",
                                                                                                                                                                                                                "scope": "DataGridContent.PortfolioEntityCard",
                                                                                                                                                                                                                "field": "CaseCreatedDate"
                                                                                                                                                                                                            }
                                                                                                                                                                                                        }
                                                                                                                                                                                                    ]
                                                                                                                                                                                                },
                                                                                                                                                                                                "to": {
                                                                                                                                                                                                    "pathname": {
                                                                                                                                                                                                        "$func": "template",
                                                                                                                                                                                                        "template": "{parentBusinessContext}/{parentEntityId}/{parentBusinessContext}/{portfolioId}/portfolioEntity/Edit/{parentBusinessContext}/{portfolioId}/Product/{productId}/product/Edit/Product/{productId}/Account/{accountid}/{accounttype}/Edit",
                                                                                                                                                                                                        "values": {
                                                                                                                                                                                                            "productId": {
                                                                                                                                                                                                                "$func": "value",
                                                                                                                                                                                                                "field": "Id",
                                                                                                                                                                                                                "scope": "DataGridContent.PortfolioProductsGrid"
                                                                                                                                                                                                            },
                                                                                                                                                                                                            "parentBusinessContext": {
                                                                                                                                                                                                                "$func": "value",
                                                                                                                                                                                                                "scope": "DynamicRouter.params",
                                                                                                                                                                                                                "field": "ParentBusinessContext"
                                                                                                                                                                                                            },
                                                                                                                                                                                                            "parentEntityId": {
                                                                                                                                                                                                                "$func": "isDefined",
                                                                                                                                                                                                                "value": {
                                                                                                                                                                                                                    "$func": "value",
                                                                                                                                                                                                                    "scope": "DynamicRouter.params",
                                                                                                                                                                                                                    "field": "EntityId"
                                                                                                                                                                                                                },
                                                                                                                                                                                                                "then": {
                                                                                                                                                                                                                    "$func": "value",
                                                                                                                                                                                                                    "scope": "DynamicRouter.params",
                                                                                                                                                                                                                    "field": "EntityId"
                                                                                                                                                                                                                },
                                                                                                                                                                                                                "else": {
                                                                                                                                                                                                                    "$func": "value",
                                                                                                                                                                                                                    "field": "ParentEntityId",
                                                                                                                                                                                                                    "scope": "DynamicRouter.params"
                                                                                                                                                                                                                }
                                                                                                                                                                                                            },
                                                                                                                                                                                                            "accountid": {
                                                                                                                                                                                                                "$func": "fieldValue",
                                                                                                                                                                                                                "field": "AccountId"
                                                                                                                                                                                                            },
                                                                                                                                                                                                            "portfolioId": {
                                                                                                                                                                                                                "$func": "value",
                                                                                                                                                                                                                "field": "Id",
                                                                                                                                                                                                                "scope": "DataGridContent.PortfolioEntityCard"
                                                                                                                                                                                                            },
                                                                                                                                                                                                            "accounttype": {
                                                                                                                                                                                                                "$func": "switch",
                                                                                                                                                                                                                "value": {
                                                                                                                                                                                                                    "$func": "fieldValue",
                                                                                                                                                                                                                    "field": "AccountType"
                                                                                                                                                                                                                },
                                                                                                                                                                                                                "cases": {
                                                                                                                                                                                                                    "5000": "wss",
                                                                                                                                                                                                                    "5001": "calypso"
                                                                                                                                                                                                                }
                                                                                                                                                                                                            }
                                                                                                                                                                                                        }
                                                                                                                                                                                                    }
                                                                                                                                                                                                }
                                                                                                                                                                                            },
                                                                                                                                                                                            {
                                                                                                                                                                                                "type": "Link",
                                                                                                                                                                                                "caption": "View",
                                                                                                                                                                                                "hidden": {
                                                                                                                                                                                                    "$func": "and",
                                                                                                                                                                                                    "operands": [
                                                                                                                                                                                                        {
                                                                                                                                                                                                            "$func": "fieldValue",
                                                                                                                                                                                                            "field": "Task_StatusId",
                                                                                                                                                                                                            "notEquals": "2"
                                                                                                                                                                                                        },
                                                                                                                                                                                                        {
                                                                                                                                                                                                            "$func": "value",
                                                                                                                                                                                                            "field": "AuthorisationCode",
                                                                                                                                                                                                            "notMatchMask": "generic.view"
                                                                                                                                                                                                        }
                                                                                                                                                                                                    ]
                                                                                                                                                                                                },
                                                                                                                                                                                                "to": {
                                                                                                                                                                                                    "pathname": {
                                                                                                                                                                                                        "$func": "template",
                                                                                                                                                                                                        "template": "{parentBusinessContext}/{parentEntityId}/{parentBusinessContext}/{portfolioId}/portfolioEntity/View/{parentBusinessContext}/{portfolioId}/Product/{productId}/product/View/Product/{productId}/Account/{accountid}/{accounttype}/View",
                                                                                                                                                                                                        "values": {
                                                                                                                                                                                                            "productId": {
                                                                                                                                                                                                                "$func": "value",
                                                                                                                                                                                                                "field": "Id",
                                                                                                                                                                                                                "scope": "DataGridContent.PortfolioProductsGrid"
                                                                                                                                                                                                            },
                                                                                                                                                                                                            "parentBusinessContext": {
                                                                                                                                                                                                                "$func": "value",
                                                                                                                                                                                                                "scope": "DynamicRouter.params",
                                                                                                                                                                                                                "field": "ParentBusinessContext"
                                                                                                                                                                                                            },
                                                                                                                                                                                                            "parentEntityId": {
                                                                                                                                                                                                                "$func": "isDefined",
                                                                                                                                                                                                                "value": {
                                                                                                                                                                                                                    "$func": "value",
                                                                                                                                                                                                                    "scope": "DynamicRouter.params",
                                                                                                                                                                                                                    "field": "EntityId"
                                                                                                                                                                                                                },
                                                                                                                                                                                                                "then": {
                                                                                                                                                                                                                    "$func": "value",
                                                                                                                                                                                                                    "scope": "DynamicRouter.params",
                                                                                                                                                                                                                    "field": "EntityId"
                                                                                                                                                                                                                },
                                                                                                                                                                                                                "else": {
                                                                                                                                                                                                                    "$func": "value",
                                                                                                                                                                                                                    "field": "ParentEntityId",
                                                                                                                                                                                                                    "scope": "DynamicRouter.params"
                                                                                                                                                                                                                }
                                                                                                                                                                                                            },
                                                                                                                                                                                                            "accountid": {
                                                                                                                                                                                                                "$func": "fieldValue",
                                                                                                                                                                                                                "field": "AccountId"
                                                                                                                                                                                                            },
                                                                                                                                                                                                            "portfolioId": {
                                                                                                                                                                                                                "$func": "value",
                                                                                                                                                                                                                "field": "Id",
                                                                                                                                                                                                                "scope": "DataGridContent.PortfolioEntityCard"
                                                                                                                                                                                                            },
                                                                                                                                                                                                            "accounttype": {
                                                                                                                                                                                                                "$func": "switch",
                                                                                                                                                                                                                "value": {
                                                                                                                                                                                                                    "$func": "fieldValue",
                                                                                                                                                                                                                    "field": "AccountType"
                                                                                                                                                                                                                },
                                                                                                                                                                                                                "cases": {
                                                                                                                                                                                                                    "5000": "wss",
                                                                                                                                                                                                                    "5001": "calypso"
                                                                                                                                                                                                                }
                                                                                                                                                                                                            }
                                                                                                                                                                                                        }
                                                                                                                                                                                                    }
                                                                                                                                                                                                }
                                                                                                                                                                                            }
                                                                                                                                                                                        ]
                                                                                                                                                                                    }
                                                                                                                                                                                ]
                                                                                                                                                                            }
                                                                                                                                                                        ]
                                                                                                                                                                    }
                                                                                                                                                                ]
                                                                                                                                                            }
                                                                                                                                                        ]
                                                                                                                                                    }
                                                                                                                                                ]
                                                                                                                                            }
                                                                                                                                        ]
                                                                                                                                    }
                                                                                                                                ]
                                                                                                                            }
                                                                                                                        ]
                                                                                                                    }
                                                                                                                ]
                                                                                                            }
                                                                                                        ]
                                                                                                    }
                                                                                                ]
                                                                                            },
                                                                                            {
                                                                                                "type": "DataGridTable",
                                                                                                "childComponents": [
                                                                                                    {
                                                                                                        "type": "DataGridHeader"
                                                                                                    },
                                                                                                    {
                                                                                                        "type": "DataGridRow",
                                                                                                        "childComponents": [
                                                                                                            {
                                                                                                                "type": "DataGridColumn",
                                                                                                                "caption": "ID",
                                                                                                                "dataKey": "Id",
                                                                                                                "styles": {
                                                                                                                    "flexBasis": "50px",
                                                                                                                    "flexGrow": 0.5,
                                                                                                                    "flexShrink": 0.5
                                                                                                                },
                                                                                                                "childComponents": [
                                                                                                                    {
                                                                                                                        "type": "Literal",
                                                                                                                        "dataKey": "Id"
                                                                                                                    }
                                                                                                                ]
                                                                                                            },
                                                                                                            {
                                                                                                                "type": "DataGridColumn",
                                                                                                                "caption": "Product Type",
                                                                                                                "styles": {
                                                                                                                    "flexGrow": 2
                                                                                                                },
                                                                                                                "dataKey": "ProductTypeName",
                                                                                                                "childComponents": [
                                                                                                                    {
                                                                                                                        "type": "Link",
                                                                                                                        "dataKey": "ProductTypeName",
                                                                                                                        "url": {
                                                                                                                            "$func": "template",
                                                                                                                            "template": "{parentBusinessContext}/{parentEntityId}/{parentBusinessContext}/{previousEntityId}/portfolioEntity/{mode}/{parentBusinessContext}/{previousEntityId}/Product/{productId}/product/{mode}",
                                                                                                                            "values": {
                                                                                                                                "productId": {
                                                                                                                                    "$func": "fieldValue",
                                                                                                                                    "field": "Id"
                                                                                                                                },
                                                                                                                                "parentBusinessContext": {
                                                                                                                                    "$func": "value",
                                                                                                                                    "scope": "DynamicRouter.params",
                                                                                                                                    "field": "ParentBusinessContext"
                                                                                                                                },
                                                                                                                                "parentEntityId": {
                                                                                                                                    "$func": "isDefined",
                                                                                                                                    "value": {
                                                                                                                                        "$func": "value",
                                                                                                                                        "scope": "DynamicRouter.params",
                                                                                                                                        "field": "EntityId"
                                                                                                                                    },
                                                                                                                                    "then": {
                                                                                                                                        "$func": "value",
                                                                                                                                        "scope": "DynamicRouter.params",
                                                                                                                                        "field": "EntityId"
                                                                                                                                    },
                                                                                                                                    "else": {
                                                                                                                                        "$func": "value",
                                                                                                                                        "field": "ParentEntityId",
                                                                                                                                        "scope": "DynamicRouter.params"
                                                                                                                                    }
                                                                                                                                },
                                                                                                                                "previousEntityId": {
                                                                                                                                    "$func": "value",
                                                                                                                                    "field": "Id",
                                                                                                                                    "scope": "DataGridContent.PortfolioEntityCard"
                                                                                                                                },
                                                                                                                                "mode": {
                                                                                                                                    "$func": "switch",
                                                                                                                                    "value": {
                                                                                                                                        "$func": "or",
                                                                                                                                        "operands": [
                                                                                                                                            {
                                                                                                                                                "$func": "value",
                                                                                                                                                "scope": "DynamicRouter.params",
                                                                                                                                                "field": "Mode",
                                                                                                                                                "notEquals": "Edit"
                                                                                                                                            },
                                                                                                                                            {
                                                                                                                                                "$func": "value",
                                                                                                                                                "field": "AuthorisationCode",
                                                                                                                                                "notMatchMask": "generic.edit"
                                                                                                                                            },
                                                                                                                                            {
                                                                                                                                                "$func": "fieldValue",
                                                                                                                                                "field": "Task_StatusId",
                                                                                                                                                "equals": "2"
                                                                                                                                            }
                                                                                                                                        ]
                                                                                                                                    },
                                                                                                                                    "cases": {
                                                                                                                                        "true": "View",
                                                                                                                                        "false": "Edit"
                                                                                                                                    }
                                                                                                                                }
                                                                                                                            }
                                                                                                                        },
                                                                                                                        "hidden": {
                                                                                                                            "$func": "and",
                                                                                                                            "operands": [
                                                                                                                                {
                                                                                                                                    "$func": "value",
                                                                                                                                    "field": "AuthorisationCode",
                                                                                                                                    "notMatchMask": "generic.edit"
                                                                                                                                },
                                                                                                                                {
                                                                                                                                    "$func": "value",
                                                                                                                                    "field": "AuthorisationCode",
                                                                                                                                    "notMatchMask": "generic.view"
                                                                                                                                }
                                                                                                                            ]
                                                                                                                        }
                                                                                                                    }
                                                                                                                ]
                                                                                                            },
                                                                                                            {
                                                                                                                "type": "DataGridColumn",
                                                                                                                "caption": "Product Category",
                                                                                                                "styles": {
                                                                                                                    "flexGrow": 2
                                                                                                                },
                                                                                                                "dataKey": "ProductCategory",
                                                                                                                "childComponents": [
                                                                                                                    {
                                                                                                                        "type": "Literal",
                                                                                                                        "dataKey": "ProductCategory"
                                                                                                                    }
                                                                                                                ]
                                                                                                            },
                                                                                                            {
                                                                                                                "type": "DataGridColumn",
                                                                                                                "caption": "Booking Entity",
                                                                                                                "styles": {
                                                                                                                    "flexGrow": 2
                                                                                                                },
                                                                                                                "dataKey": "BookingEntityName",
                                                                                                                "childComponents": [
                                                                                                                    {
                                                                                                                        "type": "Literal",
                                                                                                                        "dataKey": "BookingEntityName"
                                                                                                                    }
                                                                                                                ]
                                                                                                            },
                                                                                                            {
                                                                                                                "type": "DataGridColumn",
                                                                                                                "caption": "Country",
                                                                                                                "dataKey": "CountryName",
                                                                                                                "childComponents": [
                                                                                                                    {
                                                                                                                        "type": "Literal",
                                                                                                                        "dataKey": "CountryName"
                                                                                                                    }
                                                                                                                ]
                                                                                                            },
                                                                                                            {
                                                                                                                "type": "DataGridColumn",
                                                                                                                "caption": "Region",
                                                                                                                "dataKey": "RegionName",
                                                                                                                "childComponents": [
                                                                                                                    {
                                                                                                                        "type": "Literal",
                                                                                                                        "dataKey": "RegionName"
                                                                                                                    }
                                                                                                                ]
                                                                                                            },
                                                                                                            {
                                                                                                                "type": "DataGridColumn",
                                                                                                                "caption": "Risk Category",
                                                                                                                "dataKey": "ProductRiskCategoryName",
                                                                                                                "childComponents": [
                                                                                                                    {
                                                                                                                        "type": "StatusIndicator",
                                                                                                                        "dataKey": "ProductRiskCategoryName"
                                                                                                                    }
                                                                                                                ]
                                                                                                            },
                                                                                                            {
                                                                                                                "type": "DataGridColumn",
                                                                                                                "caption": "Owner",
                                                                                                                "styles": {
                                                                                                                    "flexGrow": 2
                                                                                                                },
                                                                                                                "dataKey": "Owner",
                                                                                                                "childComponents": [
                                                                                                                    {
                                                                                                                        "type": "Literal",
                                                                                                                        "dataKey": "Owner"
                                                                                                                    }
                                                                                                                ]
                                                                                                            },
                                                                                                            {
                                                                                                                "type": "DataGridColumn",
                                                                                                                "caption": "Managed By",
                                                                                                                "styles": {
                                                                                                                    "flexGrow": 2
                                                                                                                },
                                                                                                                "dataKey": "ManagedBy",
                                                                                                                "childComponents": [
                                                                                                                    {
                                                                                                                        "type": "Literal",
                                                                                                                        "dataKey": "ManagedBy"
                                                                                                                    }
                                                                                                                ]
                                                                                                            },
                                                                                                            {
                                                                                                                "type": "DataGridColumn",
                                                                                                                "caption": "Fund Code",
                                                                                                                "dataKey": "FundCode",
                                                                                                                "childComponents": [
                                                                                                                    {
                                                                                                                        "type": "Literal",
                                                                                                                        "dataKey": "FundCode"
                                                                                                                    }
                                                                                                                ]
                                                                                                            },
                                                                                                            {
                                                                                                                "type": "DataGridColumn",
                                                                                                                "hidden": true,
                                                                                                                "dataKey": "Product_CreatedDate",
                                                                                                                "childComponents": [
                                                                                                                    {
                                                                                                                        "type": "Literal",
                                                                                                                        "dataKey": "Product_CreatedDate"
                                                                                                                    }
                                                                                                                ]
                                                                                                            },
                                                                                                            {
                                                                                                                "type": "DataGridColumn",
                                                                                                                "caption": "Status",
                                                                                                                "dataKey": "Status",
                                                                                                                "childComponents": [
                                                                                                                    {
                                                                                                                        "type": "Literal",
                                                                                                                        "dataKey": "Status"
                                                                                                                    }
                                                                                                                ]
                                                                                                            }
                                                                                                        ]
                                                                                                    }
                                                                                                ]
                                                                                            }
                                                                                        ]
                                                                                    }
                                                                                ]
                                                                            }
                                                                        ]
                                                                    }
                                                                ]
                                                            }
                                                        ]
                                                    }
                                                ]
                                            }
                                        ]
                                    },
                                    {
                                        "type": "DataGridTable",
                                        "childComponents": [
                                            {
                                                "type": "DataGridHeader"
                                            },
                                            {
                                                "type": "DataGridRow",
                                                "childComponents": [
                                                    {
                                                        "type": "DataGridColumn",
                                                        "caption": "ID",
                                                        "styles": {
                                                            "flexBasis": "50px",
                                                            "flexGrow": 0.5,
                                                            "flexShrink": 0.5
                                                        },
                                                        "dataKey": "Id",
                                                        "sortable": true,
                                                        "childComponents": [
                                                            {
                                                                "type": "Literal",
                                                                "dataKey": "Id"
                                                            }
                                                        ]
                                                    },
                                                    {
                                                        "type": "DataGridColumn",
                                                        "caption": "CaseAssociationId",
                                                        "hidden": true,
                                                        "dataKey": "CaseAssociationId",
                                                        "sortable": false,
                                                        "childComponents": [
                                                            {
                                                                "type": "Literal",
                                                                "dataKey": "CaseAssociationId"
                                                            }
                                                        ]
                                                    },
                                                    {
                                                        "type": "DataGridColumn",
                                                        "caption": "TradingEntityOwnedById",
                                                        "hidden": true,
                                                        "dataKey": "TradingEntityOwnedById",
                                                        "sortable": false,
                                                        "childComponents": [
                                                            {
                                                                "type": "Literal",
                                                                "dataKey": "TradingEntityOwnedById"
                                                            }
                                                        ]
                                                    },
                                                    {
                                                        "type": "DataGridColumn",
                                                        "caption": "TradingEntityTypeId",
                                                        "hidden": true,
                                                        "dataKey": "TradingEntityTypeId",
                                                        "sortable": false,
                                                        "childComponents": [
                                                            {
                                                                "type": "Literal",
                                                                "dataKey": "TradingEntityTypeId"
                                                            }
                                                        ]
                                                    },
                                                    {
                                                        "type": "DataGridColumn",
                                                        "caption": "Type",
                                                        "styles": {
                                                            "flexGrow": 2
                                                        },
                                                        "dataKey": "TradingEntityType",
                                                        "sortable": true,
                                                        "childComponents": [
                                                            {
                                                                "type": "Literal",
                                                                "dataKey": "TradingEntityType"
                                                            }
                                                        ]
                                                    },
                                                    {
                                                        "type": "DataGridColumn",
                                                        "caption": "Name",
                                                        "className": "overflow-hidden",
                                                        "styles": {
                                                            "flexBasis": "30%",
                                                            "minWidth": "30%",
                                                            "maxWidth": "70%"
                                                        },
                                                        "dataKey": "LegalEntityName",
                                                        "sortable": true,
                                                        "childComponents": [
                                                            {
                                                                "type": "Link",
                                                                "dataKey": "LegalEntityName",
                                                                "to": {
                                                                    "pathname": {
                                                                        "$func": "template",
                                                                        "template": "{businessContext}/{entityId}/LegalEntity/{tradingEntityId}/portfolioEntity/{mode}",
                                                                        "values": {
                                                                            "businessContext": {
                                                                                "$func": "value",
                                                                                "scope": "DynamicRouter.params",
                                                                                "field": "ParentBusinessContext"
                                                                            },
                                                                            "entityId": {
                                                                                "$func": "isDefined",
                                                                                "value": {
                                                                                    "$func": "value",
                                                                                    "scope": "DynamicRouter.params",
                                                                                    "field": "EntityId"
                                                                                },
                                                                                "then": {
                                                                                    "$func": "value",
                                                                                    "scope": "DynamicRouter.params",
                                                                                    "field": "EntityId"
                                                                                },
                                                                                "else": {
                                                                                    "$func": "value",
                                                                                    "scope": "DynamicRouter.params",
                                                                                    "field": "ParentEntityId"
                                                                                }
                                                                            },
                                                                            "tradingEntityId": {
                                                                                "$func": "fieldValue",
                                                                                "field": "Id"
                                                                            },
                                                                            "mode": {
                                                                                "$func": "switch",
                                                                                "value": {
                                                                                    "$func": "or",
                                                                                    "operands": [
                                                                                        {
                                                                                            "$func": "value",
                                                                                            "field": "AuthorisationCode",
                                                                                            "notMatchMask": "generic.edit"
                                                                                        },
                                                                                        {
                                                                                            "$func": "value",
                                                                                            "scope": "DynamicRouter.params",
                                                                                            "field": "Mode",
                                                                                            "notEquals": "Edit"
                                                                                        },
                                                                                        {
                                                                                            "$func": "fieldValue",
                                                                                            "field": "Task_StatusId",
                                                                                            "equals": "2"
                                                                                        }
                                                                                    ]
                                                                                },
                                                                                "cases": {
                                                                                    "true": "View",
                                                                                    "false": "Edit"
                                                                                }
                                                                            }
                                                                        }
                                                                    },
                                                                    "hidden": {
                                                                        "$func": "and",
                                                                        "operands": [
                                                                            {
                                                                                "$func": "value",
                                                                                "field": "AuthorisationCode",
                                                                                "notMatchMask": "generic.edit"
                                                                            },
                                                                            {
                                                                                "$func": "value",
                                                                                "field": "AuthorisationCode",
                                                                                "notMatchMask": "generic.view"
                                                                            }
                                                                        ]
                                                                    }
                                                                }
                                                            }
                                                        ]
                                                    },
                                                    {
                                                        "type": "DataGridColumn",
                                                        "caption": "Identifier",
                                                        "styles": {
                                                            "flexGrow": 3
                                                        },
                                                        "dataKey": "TradingEntityIdentifier",
                                                        "sortable": true,
                                                        "childComponents": [
                                                            {
                                                                "type": "Literal",
                                                                "dataKey": "TradingEntityIdentifier"
                                                            }
                                                        ]
                                                    },
                                                    {
                                                        "type": "DataGridColumn",
                                                        "caption": "Status",
                                                        "styles": {
                                                            "flexGrow": 2
                                                        },
                                                        "dataKey": "TradingEntityStatus",
                                                        "sortable": true,
                                                        "childComponents": [
                                                            {
                                                                "type": "Literal",
                                                                "dataKey": "TradingEntityStatus"
                                                            }
                                                        ]
                                                    },
                                                    {
                                                        "type": "DataGridColumn",
                                                        "caption": "Owner",
                                                        "className": "overflow-hidden",
                                                        "styles": {
                                                            "flexBasis": "20%",
                                                            "minWidth": "20%",
                                                            "maxWidth": "20%"
                                                        },
                                                        "dataKey": "TradingEntityOwnedByName",
                                                        "sortable": true,
                                                        "childComponents": [
                                                            {
                                                                "type": "Link",
                                                                "url": {
                                                                    "$func": "template",
                                                                    "template": "/app/{legalEntityId}/LegalEntity/{legalEntityId}/le360",
                                                                    "values": {
                                                                        "legalEntityId": {
                                                                            "$func": "fieldValue",
                                                                            "field": "TradingEntityOwnedById"
                                                                        }
                                                                    }
                                                                }
                                                            }
                                                        ]
                                                    },
                                                    {
                                                        "type": "DataGridColumn",
                                                        "caption": "Managed By",
                                                        "styles": {
                                                            "flexGrow": 2
                                                        },
                                                        "dataKey": "TradingEntityManagedByName",
                                                        "sortable": true,
                                                        "childComponents": [
                                                            {
                                                                "type": "Link",
                                                                "url": {
                                                                    "$func": "template",
                                                                    "template": "/app/{legalEntityId}/LegalEntity/{legalEntityId}/le360",
                                                                    "values": {
                                                                        "legalEntityId": {
                                                                            "$func": "fieldValue",
                                                                            "field": "TradingEntityManagedById"
                                                                        }
                                                                    }
                                                                }
                                                            }
                                                        ]
                                                    }
                                                ]
                                            }
                                        ]
                                    }
                                ]
                            },
                            {
                                "type": "Button",
                                "name": "submitPortfolios",
                                "caption": "Back",
                                "mode": "Secondary",
                                "onClick": [
                                    {
                                        "behaviour": "setValue",
                                        "provider": "FormArea",
                                        "namespace": "RelinkingRequestFormArea",
                                        "argument": {
                                            "fieldName": "RelinkRequestStage",
                                            "value": "select-portfolio"
                                        }
                                    }
                                ]
                            }
                        ]
                    }
                ]
            }
        ]
    },
    "messages": []
}